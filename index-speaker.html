<!DOCTYPE html>
<html lang="es"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Escuela Politécnica Nacional">
  <title>Análisis y visualización de datos con R</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/highcharts.jpg" data-background-opacity="0.40" data-background-size="contain" class="quarto-title-block center">
  <h1 class="title">Análisis y visualización de datos con R</h1>
  <p class="subtitle">Simulación (IMAD743)</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Escuela Politécnica Nacional 
</div>
</div>
</div>

</section>
<section>
<section id="bienvenidos-al-curso-de-simulación" class="title-slide slide level1 center">
<h1>¡Bienvenidos al curso de Simulación!</h1>
<p><span style="color:#444442;"><strong>Dejad Excel a un lado</strong></span><br>
<img data-src="img/hateExcel.png" style="width:10.0%"></p>
</section>
<section id="hola-a-todos" class="slide level2">
<h2>¡Hola a todos!</h2>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/me.jpeg"></p>
</div><div class="column" style="width:70%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Diego Paúl Huaraca Shagñay</strong></span>, nacido en 1989 en Riobamba.</p></li>
<li class="fragment"><p>Ingeniero Matemático. <span class="hl-yellow"><strong>Escuela Politécnica Nacional</strong></span> (2013).</p></li>
<li class="fragment"><p>Máster en Ciencias Actuariales y Financieras. <span class="hl-yellow"><strong>Universidad de Alcalá</strong></span> (2018).</p></li>
<li class="fragment"><p>Consultor Analítico de Riesgo Financiero. <span class="hl-green"><strong>BI-SCIENCES</strong></span> (desde 2018).</p></li>
<li class="fragment"><p>Docente del Departamento de Matemática. <span class="hl-green"><strong>Escuela Politécnica Nacional</strong></span> (desde 2018).</p></li>
<li class="fragment"><p>Consultor Actuarial. <span class="hl-green"><strong>Superintendencia de Bancos</strong></span> (desde 2022).</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="contenido-del-curso" class="slide level2">
<h2>Contenido del curso</h2>
<!-- Primera parte -->
<div class="columns">
<div class="column" style="width:20%;">
<p><img data-src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPKIAIbhuhpU6GMjL2jBdHycULZOCEVt-XWs9Z_b0elEikNTefOLW3yk2ajknsTLsMDo4&amp;usqp=CAU.png"></p>
</div><div class="column" style="width:80%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-red"><strong>Introducción al Lenguaje R</strong></span> → <code>{a programar se aprende programando}</code>.</p></li>
<li class="fragment"><p><span class="hl-red"><strong>Visualización de datos</strong></span> → <code>{gráficos estáticos y dinámicos}</code>.</p></li>
<li class="fragment"><p><span class="hl-red"><strong>Desarrollo de aplicativos web</strong></span> → <code>{shiny, shinydashboard}</code>.</p></li>
<li class="fragment"><p><span class="hl-red"><strong>Reportería dinámica</strong></span> → <code>{LaTeX, rmarkdown, Quarto}</code>.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Simuladores de números aleatorios</strong></span> → <code>{base}</code>.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Simulación de variables aleatorias</strong></span> → <code>{discretas y continuas}</code>.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="contenido-del-curso-1" class="slide level2">
<h2>Contenido del curso</h2>
<!-- Segunda Parte -->
<div class="columns">
<div class="column" style="width:20%;">
<p><img data-src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPKIAIbhuhpU6GMjL2jBdHycULZOCEVt-XWs9Z_b0elEikNTefOLW3yk2ajknsTLsMDo4&amp;usqp=CAU.png"></p>
</div><div class="column" style="width:80%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Simulación de vectores aleatorias</strong></span>.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Simulación de procesos estocásticos</strong></span> → <code>{Markov, Weiner, etc.}</code>.</p></li>
<li class="fragment"><p><span class="hl-red"><strong>Métodos de MonteCarlo</strong></span> → <code>{secuenciales, inferencia estadística}</code>.</p></li>
<li class="fragment"><p><span class="hl-red"><strong>Técnicas de Remuestreo</strong></span>.</p></li>
<li class="fragment"><p><span class="hl-red"><strong>Métodos de MoteCarlo en Cadenas de Markov</strong></span></p></li>
<li class="fragment"><p><span class="hl-red"><strong>Aplicaciones avanzadas</strong></span> → <code>{simulación por eventos}</code>.</p></li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="instalación-del-lenguaje-r" class="title-slide slide level1 center">
<h1>Instalación del Lenguaje R</h1>
<p><span style="color:#444442;"><strong>Instalando R y RStudio</strong></span></p>
</section>
<section id="requisitos" class="slide level2">
<h2>Requisitos</h2>
<p>Para el desarrollo del curso se requiere:</p>
<ol type="1">
<li><p><span class="hl-yellow"><strong>Conexión a internet</strong></span> (para la descarga de paquetes y bases de datos).</p></li>
<li><p><span class="hl-yellow"><strong>Descargar R</strong></span>: La descarga se realiza (gratuitamente) desde el enlace: <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></p></li>
<li><p><span class="hl-yellow"><strong>Descargar RStudio</strong></span>: La descarga se realiza (gratuitamente) desde el enlace: <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></p></li>
</ol>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/cranR.jpg" width="440"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rstudio.jpg" width="440"></p>
</div>
</div>
</section>
<section id="instalación-de-r" class="slide level2">
<h2>Instalación de R</h2>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: Ingrese al repositorio CRAN en <a href="https://cran.r-project.org/" class="uri"><strong>https://cran.r-project.org/</strong></a> y seleccione su sistema operativo.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: Para el sistema MacOs basta con hacer click en <strong>R-4.X.Y.pkg</strong>, y abrirlo una vez descargado. Para el sistema Windows, basta con hacer click en <strong>install R for the first time</strong> y después en <strong>Download R-X.Y.Z for Windows</strong>, una vez descargado, abrirlo como cualquier archivo de instalación.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: Abrir el ejecutable e instalar el programa con todas las opciones por defecto.</p></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Siempre que tengas que descargar algo del repositorio CRAN (ya sea el propio R o un paquete), <span class="hl-red"><strong>asegúrate de tener conexión a internet</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="cran" class="slide level2">
<h2>CRAN</h2>
<div>
<ul>
<li class="fragment"><p>El lenguaje R se distribuye gratuitamente a través del repositorio <span class="hl-purple"><strong>Comprehensive R Archive Network (CRAN)</strong></span> propiedad de la R Foundation for Statistical Computing.</p></li>
<li class="fragment"><p>El mantenimiento se encuentra a cargo del <span class="hl-purple"><strong>grupo R Core Team</strong></span> asistido por una gran cantidad de colaboradores internacionales.</p></li>
<li class="fragment"><p>Con la finalidad de evitar el colapso del mundo estadístico, el repositorio CRAN se refleja en <span class="hl-purple"><strong>diferentes lugares</strong></span> de todo el mundo</p></li>
</ul>
</div>
<div class="column" style="width:60%;">
<p><img data-src="img/CRAN.png" width="380"></p>
</div>
</section>
<section id="funcionamiento" class="slide level2">
<h2>Funcionamiento</h2>
<div>
<ul>
<li class="fragment"><p>R es un lenguaje <span class="hl-purple"><strong>orientado a objetos</strong></span> diseñado en un entorno auténtico bajo el cual esconde su simplicidad y flexibilidad, lo cual permite a sus usuarios añadir funcionalidad mediante la definición de nuevas funciones y operadores.</p></li>
<li class="fragment"><p>R almacena sus variables, datos, funciones y resultados en la <span class="hl-purple"><strong>memoria activa</strong></span> del computador en forma de objetos con un nombre específico y pueden ser <span class="hl-purple"><strong>modificados o manipulados</strong></span> por el usuario.</p></li>
</ul>
</div>
<div class="column" style="width:90%;">
<p><img data-src="img/FunR.png" width="630"></p>
</div>
</section>
<section id="primera-operación" class="slide level2">
<h2>Primera operación</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Para comprobar que se ha instalado correctamente, tras abrir <code>R</code>, deberías ver una <strong>pantalla blanca</strong> similar a esta.</p>
<p>Esa «pantalla blanca» se llama <span class="hl-yellow"><strong>consola</strong></span> y podemos hacer un primer uso de ella como si se tratase de una <strong>calculadora</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="240"></p>
</div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Idea</strong></span>: a una variable llamada <code>a</code> le asignaremos el valor de <code>3</code> (escribiremos el código de abajo en la consola y daremos «enter»)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="primera-operación-1" class="slide level2">
<h2>Primera operación</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Para comprobar que se ha instalado correctamente, tras abrir <code>R</code>, deberías ver una <strong>pantalla blanca</strong> similar a esta.</p>
<p>Esa «pantalla blanca» se llama <span class="hl-yellow"><strong>consola</strong></span> y podemos hacer un primer uso de ella como si se tratase de una <strong>calculadora</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="240"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Idea</strong></span>: definiremos otra variable llamada <code>b</code> y le asignaremos el valor <code>5</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>En <code>R</code> usaremos <code>&lt;-</code> como una <strong>flecha</strong>: la variable a la izquierda de dicha flecha recibe el valor que hay a la derecha (por ejemplo, <code>a &lt;- 3</code>)</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-operación-2" class="slide level2">
<h2>Primera operación</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Para comprobar que se ha instalado correctamente, tras abrir <code>R</code>, deberías ver una <strong>pantalla blanca</strong> similar a esta.</p>
<p>Esa «pantalla blanca» se llama <span class="hl-yellow"><strong>consola</strong></span> y podemos hacer un primer uso de ella como si se tratase de una <strong>calculadora</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="240"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Idea</strong></span>: haremos la suma <code>a + b</code> y nos devolverá su resultado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>a <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8</code></pre>
</div>
</div>
</section>
<section id="instalación-de-rstudio" class="slide level2">
<h2>Instalación de RStudio</h2>
<p><code>RStudio</code> será el <span class="hl-purple"><strong>Bloc de Notas</strong></span> que usaremos para escribir los códigos (lo que se conoce como un <span class="hl-yellow"><strong>IDE: entorno integrado de desarrollo</strong></span>).</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 1</strong></span>: Ingrese a la página de Posit en <a href="https://posit.co/download/rstudio-desktop/" class="uri"><strong>https://posit.co/download/rstudio-desktop/</strong></a> y seleccione la descarga gratuita.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 2</strong></span>: Selecciona el ejecutable en función al sistema operativo que use.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Paso 3</strong></span>: Luego de la descarga, se apertura el ejecutable como cualquier otro programa y se instala todo por defecto.</p></li>
</ul>
</div>
</section>
<section id="organización-de-rstudio" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Consola</strong></span>: es el nombre para llamar a la ventana grande que te ocupa buena parte de tu pantalla. Prueba a escribir el mismo código que antes (la suma de las variables) en ella. La consola será donde <span class="hl-purple"><strong>ejecutaremos órdenes y mostraremos resultados</strong></span>.</li>
</ul>

<img data-src="img/consola_rstudio.jpg" width="420" class="r-stretch"></section>
<section id="organización-de-rstudio-1" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Environment</strong></span>: la pantalla pequeña (puedes ajustar los márgenes con el ratón a tu gusto) que tenemos en la parte superior derecha. Nos mostrará las <span class="hl-purple"><strong>variables que tenemos definidas</strong></span>.</li>
</ul>

<img data-src="img/environment.jpg" width="420" class="r-stretch"></section>
<section id="organización-de-rstudio-2" class="slide level2">
<h2>Organización de RStudio</h2>
<p>Al abrir <code>RStudio</code> seguramente tengas tres ventanas:</p>
<ul>
<li><span class="hl-yellow"><strong>Panel multiusos</strong></span>: la ventana que tenemos en la parte inferior derecha servirá para buscar <span class="hl-purple"><strong>ayuda de funciones</strong></span>, para <span class="hl-purple"><strong>visualizar gráficos</strong></span>, así como para la <span class="hl-purple"><strong>carga de librerías</strong></span> y <span class="hl-purple"><strong>navegación</strong></span> por las carpetas del CPU.</li>
</ul>

<img data-src="img/multiusos.jpg" width="420" class="r-stretch"></section></section>
<section>
<section id="qué-es-r-primeros-usos" class="title-slide slide level1 center">
<h1>¿Qué es R? Primeros usos</h1>
<p><span style="color:#444442;"><strong>¿Cuáles son las ventajas? Primer uso</strong></span></p>
</section>
<section id="qué-es-r-por-qué-r" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>

<img data-src="img/meme_barco.jpg" class="r-stretch"></section>
<section id="qué-es-r-por-qué-r-1" class="slide level2">
<h2>¿Qué es R? ¿Por qué R?</h2>
<p><code>R</code> es el <span class="hl-yellow"><strong>lenguaje estadístico por excelencia</strong></span>, creado por y para estadísticos/as, con 5 ventajas fundamentales <span class="hl-red"><strong>frente a Excel</strong></span>:</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Lenguaje de programación</strong></span>: la obviedad <span class="fragment fade-in">→ análisis <span class="hl-purple"><strong>replicables</strong></span></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Gratuito</strong></span>: la filosofía de la comunidad de <code>R</code> es el compartir código bajo <strong>copyleft</strong> <span class="fragment fade-in">→ <span class="hl-purple"><strong>uso ético de dinero público</strong></span></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Software libre</strong></span>: no solo es gratis sino que permite acceder libremente a código ajeno, incluso al <strong>propio código fuente</strong> <span class="fragment fade-in">→ <span class="hl-purple"><strong>flexibilidad y transparencia</strong></span></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Lenguaje modular</strong></span>: hemos instalado lo mínimo, pero existen códigos de otras personas que podemos reusar (19430 <span class="hl-yellow"><strong>paquetes</strong></span> al 28/04/2023) <span class="fragment fade-in">→ <span class="hl-purple"><strong>ahorro de tiempo</strong></span></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Lenguaje de alto nivel</strong></span>: facilita la programación (como Python) <span class="fragment fade-in">→ <span class="hl-purple"><strong>menor curva de aprendizaje</strong></span></span></p></li>
</ul>
</div>
</section>
<section id="por-qué-programar" class="slide level2">
<h2>¿Por qué programar?</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Automatizar</strong></span> → te permitirá automatizar tareas recurrentes (ejemplo: actualizar pronósticos del tiempo, actualizar informes estadísticos) de forma que solo tendrás que programarlo uno vez.</p></li>
<li><p><span class="hl-yellow"><strong>Replicabilidad</strong></span> → podrás replicar tu análisis siempre de la misma manera.</p></li>
<li><p><span class="hl-yellow"><strong>Flexibilidad</strong></span> → podrás adaptar el software a tus necesidades.</p></li>
<li><p><span class="hl-yellow"><strong>Transparencia</strong></span> → ser auditado por la comunidad.</p></li>
</ul>

<img data-src="img/the_general_problem.png" class="r-stretch"></section>
<section id="idea-fundamental-paquetes" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<p>Una de las ideas claves de <code>R</code> es el <span class="hl-yellow"><strong>uso de paquetes</strong></span>: códigos que otras personas han implementado para <strong>resolver un problema</strong></p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Instalación</strong></span>: descargamos los códigos de la web (necesitamos internet) → <span class="hl-purple"><strong>comprar un libro</strong></span>, solo una vez (por ordenador)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Carga</strong></span>: indicamos qué paquetes queremos usar cada vez que iniciamos <code>RStudio</code> → <span class="hl-purple"><strong>traer el libro de la estantería</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="idea-fundamental-paquetes-1" class="slide level2">
<h2>Idea fundamental: paquetes</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<p>Una vez instalado, hay dos manera de usar un paquete (traerlo de la estantería)</p>
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Paquete entero</strong></span>: con <code>library()</code>, usando el nombre del paquete sin comillas, cargamos en la sesión <span class="hl-purple"><strong>todo el libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Funciones concretas</strong></span> usando <code>paquete::funcion</code> le índicamos que solo queremos una <span class="hl-purple"><strong>página concreta de ese libro</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="te-vas-equivocar" class="slide level2">
<h2>Te vas equivocar</h2>
<p>Durante tu aprendizaje va a ser muy habitual que las cosas no salgan a la primera → <span class="hl-yellow"><strong>te vas equivocar</strong></span>. No solo será importante asumirlo sino que es <span class="hl-yellow"><strong>importante leer los mensajes de error</strong></span> para aprender de ellos.</p>
<div class="fragment">
<ul>
<li><span class="hl-red"><strong>Mensajes de error</strong></span>: precedidos de <strong>«Error in…»</strong> y serán aquellos fallos que <span class="hl-yellow"><strong>impidan la ejecución</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">"a"</span> <span class="sc">+</span> <span class="dv">1</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-orange"><strong>Mensajes de warning</strong></span>: precedidos de <strong>«Warning in…»</strong> son los (posibles) fallos más delicados ya que son incoherencias que <span class="hl-yellow"><strong>no impiden la ejecución</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Ejecuta la orden pero el resultado es NaN, **Not A Number**, un valor que no existe</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(-1): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="antes-de-arrancar-scripts" class="slide level2">
<h2>Antes de arrancar: scripts</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/abrir_script.jpg" width="350"></p>
</div><div class="column" style="width:65%;">
<p>Un <span class="hl-yellow"><strong>script</strong></span> será el documento en el que programamos, nuestro archivo <code>.doc</code> (aquí con extensión <code>.R</code>) donde escribiremos las órdenes. Para <strong>abrir nuestro primero script</strong>, haz click en el menú en <code>File &lt; New File &lt; R Script</code>.</p>
</div>
</div>
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Es importante <strong>no abusar de la consola</strong>: todo lo que no escribas en un script, cuando cierres, <span class="hl-red"><strong>lo habrás perdido</strong></span>.</p>
</div>
</div>
</div>
</section>
<section id="ejecutando-el-primer-script" class="slide level2">
<h2>Ejecutando el primer script</h2>
<p>Ahora tenemos una <strong>cuarta ventana</strong>: la ventana donde <span class="hl-yellow"><strong>escribiremos nuestros códigos</strong></span>. ¿Cómo ejecutarlo?</p>
<div class="fragment">
<ol type="1">
<li><strong>Escribimos</strong> el código a ejecutar.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><strong>Guardamos</strong> el archivo .R haciendo click en <code>Save current document</code>.</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>El código no se ejecuta salvo que se lo indiquemos. Tenemos tres opciones:</li>
</ol>
<ul>
<li><span class="hl-yellow"><strong>Copiar y pegar</strong></span> en consola.</li>
<li><span class="hl-yellow"><strong>Seleccionar líneas</strong></span> y <code>Ctrl+Enter</code></li>
<li><span class="hl-yellow"><strong>Activar Source on save</strong></span> a la derecha de guardar: no solo guarda sino que ejecuta el código <strong>completo</strong>.</li>
</ul>
</div>
</section>
<section id="tu-turno" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Ejecuta tu primer script</strong>: crea un script de cero, programa lo indicado debajo y ejecútalo (de las 3 maneras posibles)</span></p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-1-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-1-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-1-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-1-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>📝 Define una variable de nombre <code>a</code> y cuyo valor sea -1</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>a <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2">
<p>📝 Añade debajo otra línea para definir una variable <code>b</code> con el valor 5. Tras ello múltiplica ambas variables</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>a <span class="sc">*</span> b <span class="co"># sin guardar</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>multiplicacion <span class="ot">&lt;-</span> a <span class="sc">*</span> b <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3">
<p>📝 Modifica el código inferior para definir dos variables c y d, con valores 3 y -1. Tras ello divide las variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>c <span class="ot">&lt;-</span> <span class="co"># deberías asignarle el valor 3</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>d <span class="ot">&lt;-</span> <span class="co"># deberías asignarle el valor -1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>d <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>c <span class="sc">/</span> d <span class="co"># sin guardar</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>division <span class="ot">&lt;-</span> c <span class="sc">/</span> d <span class="co"># guardado</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-4">
<p>📝 Asigna un valor positivo a <code>x</code> y calcula su raíz cuadrada; asigna otro negativo <code>y</code> y calcula su valor absoluto con la función <code>abs()</code>.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">sqrt</span>(x)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="fu">abs</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-5">
<p>📝 Usando la variable <code>x</code> ya definida, completa/modifica el código inferior para guardar en una nueva variable <code>z</code> el resultado guardado en <code>x</code> menos 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>z <span class="ot">&lt;-</span> ? <span class="sc">-</span> ? <span class="co"># completa el código</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="dv">5</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Toma nota</strong></p>
</div>
<div class="callout-content">
<p>Comandos como <code>sqrt()</code>, <code>abs()</code> o <code>max()</code> son lo que llamamos <span class="hl-purple"><strong>funciones</strong></span>: líneas de código que hemos «encapsulado» bajo un nombre, y dado unos argumentos de entrada, ejecuta las órdenes (una especie de atajo).</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="primeros-datos-variables" class="title-slide slide level1 center">
<h1>Primeros datos: variables</h1>
<p><span style="color:#444442;"><strong>¿Qué tipos de datos existen?</strong></span></p>
</section>
<section id="de-la-celda-a-la-tabla" class="slide level2">
<h2>De la CELDA a la TABLA</h2>
<p>¿Qué <span class="hl-yellow"><strong>tipo de dato</strong></span> podemos tener en cada celda de una <strong>tabla</strong>?</p>

<img data-src="img/celdas.jpg" class="r-stretch quarto-figure-center"><div>
<ul>
<li class="fragment"><span class="hl-yellow"><strong>Celda</strong></span>: dato individual de un tipo concreto.</li>
<li class="fragment"><span class="hl-yellow"><strong>Variable</strong></span>: <strong>concatenación</strong> de valores del mismo tipo (<span class="hl-purple"><strong>vectores</strong></span>).</li>
<li class="fragment"><span class="hl-yellow"><strong>Matriz</strong></span>: concatenación de variables del <strong>mismo tipo y longitud</strong>.</li>
<li class="fragment"><span class="hl-yellow"><strong>Tabla</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo pero igual longitud</strong></span></li>
<li class="fragment"><span class="hl-yellow"><strong>Lista</strong></span>: concatenación de variables de <span class="hl-purple"><strong>distinto tipo y distinta longitud</strong></span></li>
</ul>
</div>
</section>
<section id="celdas-tipos-de-datos" class="slide level2">
<h2>Celdas: tipos de datos</h2>
<p>¿Existen <span class="hl-yellow"><strong>variables más allá de los números</strong></span>?</p>
<div class="fragment">
<p>Piensa por ejemplo en los datos guardados de una persona:</p>
<div class="fragment fade-up">
<ul>
<li>La edad o el peso será un <span class="hl-yellow"><strong>número</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su nombre será una cadena de <span class="hl-yellow"><strong>texto (string o char)</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>A la pregunta «¿está usted soltero/a?» la respuesta será lo que llamamos una <span class="hl-yellow"><strong>variable lógica</strong></span> (<code>TRUE</code> si está soltero/a o <code>FALSE</code> en otro caso).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>soltero <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Su fecha de nacimiento será precisamente eso, una <span class="hl-yellow"><strong>fecha</strong></span>.</li>
</ul>
</div>
</div>
</section>
<section id="variables-numéricos" class="slide level2">
<h2>Variables numéricos</h2>
<p>El dato más sencillo (ya lo hemos usado) serán las <span class="hl-yellow"><strong>variables numéricas</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Para saber el tipo de una variable tenemos la función <code>class()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>&nbsp;</p>
</div>
<div class="fragment">
<p>Con las variables numéricas podemos realizar las <span class="hl-yellow"><strong>operaciones aritméticas</strong></span> de una calculadora: sumar (<code>+</code>), raíz cuadrada (<code>sqrt()</code>), cuadrado (<code>^2</code>), etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>a<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-texto" class="slide level2">
<h2>Variables de texto</h2>
<p>Imagina que además de la edad de una persona queremos guardar su nombre</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javier"</span></span>
<span id="cb29-2"><a href="#cb29-2"></a><span class="fu">class</span>(nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>cadenas de texto</strong></span> son un tipo con el que obviamente <span class="hl-red"><strong>no podremos hacer operaciones</strong></span> aritméticas (sí otras operaciones como pegar o localizar patrones).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>nombre <span class="sc">+</span> <span class="dv">1</span> <span class="co"># error al sumar número a texto</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in nombre + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
<p>&nbsp;</p>
</div>
<div class="fragment">
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recuerda que…</strong></p>
</div>
<div class="callout-content">
<p>Las variables de tipo texto (character o stringr) van siempre <span class="hl-orange"><strong>entre comillas</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="primera-función-paste" class="slide level2">
<h2>Primera función: paste</h2>
<p>Como hemos comentado, una <span class="hl-yellow"><strong>función</strong></span> es un trozo de <strong>código encapsulado</strong> bajo un nombre que depende de unos argumentos de entrada. Nuestra primera función será <code>paste()</code>: dadas dos cadenas de texto nos permite pegarlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier Álvarez"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Fíjate que <span class="hl-yellow"><strong>por defecto</strong></span> nos pega las cadenas con un espacio, pero podemos añadir un <span class="hl-yellow"><strong>argumento opcional</strong></span> para indicarle el separador</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>, <span class="at">sep =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier*Álvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primera-función-paste-1" class="slide level2">
<h2>Primera función: paste</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/paste_help.jpg"></p>
</div><div class="column" style="width:50%;">
<p>¿Cómo saber que argumentos tiene una función? Escribiendo en consola <code>? paste</code> te aparecerá una <span class="hl-yellow"><strong>ayuda</strong></span> en el panel multiusos.</p>
<p>En dicha ayuda podrás ver en su cabecera que argumentos ya tiene asignados por defecto la función</p>
</div>
</div>
<div class="fragment">
<p>Existe una función similar llamada <code>paste0()</code> que pega por defecto con <code>sep = ""</code> (sin nada).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">paste0</span>(<span class="st">"Javier"</span>, <span class="st">"Álvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "JavierÁlvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="primer-paquete-glue" class="slide level2">
<h2>Primer paquete: glue</h2>
<p>Una forma más intuitiva de trabajar con textos es usar el paquete <code>{glue}</code>: lo primero que haremos será «comprar el libro» (si nunca lo hemos hecho). Tras ello <span class="hl-yellow"><strong>cargamos el paquete</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">install.packages</span>(<span class="st">"glue"</span>) <span class="co"># solo la primra vez</span></span>
<span id="cb39-2"><a href="#cb39-2"></a><span class="fu">library</span>(glue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<div class="fragment">
<p>Con dicho paquete podemos usar <span class="hl-yellow"><strong>variables dentro de cadenas de texto</strong></span>. Por ejemplo, «la edad es de … años», donde la edad está guardada en una variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad} años"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 33 años</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dentro de las llaves también podemos ejecutar operaciones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>unidades <span class="ot">&lt;-</span> <span class="st">"días"</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="fu">glue</span>(<span class="st">"La edad es de {edad * 365} {unidades}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>La edad es de 12045 días</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-lógicas" class="slide level2">
<h2>Variables lógicas</h2>
<p>Una <span class="hl-yellow"><strong>variable lógica o binaria</strong></span> es aquella que toma <strong>dos valores</strong>:</p>
<ul>
<li><code>TRUE</code>: <span class="hl-yellow"><strong>verdadero</strong></span> guardado internamente como un 1.</li>
<li><code>FALSE</code>: <span class="hl-yellow"><strong>falso</strong></span> guardado internamente como un 0.</li>
<li><code>NA</code>: <span class="hl-yellow"><strong>dato ausente</strong></span> son las siglas de <em>not available</em>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>soltero <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># ¿Es soltero? --&gt; SÍ</span></span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="fu">class</span>(soltero)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Las variables lógicas <span class="hl-red"><strong>NO son variables de texto</strong></span>: <code>"TRUE"</code> es un texto, <code>TRUE</code> es un valor lógico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="cn">TRUE</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="st">"TRUE"</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "TRUE" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-lógicas" class="slide level2">
<h2>Condiciones lógicas</h2>
<p>Los valores lógicos suelen ser resultado de <span class="hl-yellow"><strong>evaluar condiciones lógicas</strong></span>. Por ejemplo, imaginemos que queremos comprobar si una persona se llama Javi.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>nombre <span class="ot">&lt;-</span> <span class="st">"María"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Con el <span class="hl-yellow"><strong>operador lógico</strong></span> <code>==</code> preguntamos sí a la izquierda es igual a la derecha</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>nombre <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Con su opuesto <code>!=</code> preguntamos si es distinto.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>nombre <span class="sc">!=</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Fíjate que…</strong></p>
</div>
<div class="callout-content">
<p>No es lo mismo <code>&lt;-</code> (asignación) que una <span class="hl-yellow"><strong>comparación lógica</strong></span> con <code>==</code> (estamos preguntando).</p>
</div>
</div>
</div>
</div>
</section>
<section id="condiciones-lógicas-1" class="slide level2">
<h2>Condiciones lógicas</h2>
<p>Además de las comparaciones «igual a» frente «distinto», también comparaciones de orden como <code>&lt;, &lt;=, &gt; o &gt;=</code>.</p>
<p>&nbsp;</p>
<p><strong>¿Tiene la persona menos de 32 años?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">38</span></span>
<span id="cb55-2"><a href="#cb55-2"></a>edad <span class="sc">&lt;</span> <span class="dv">32</span> <span class="co"># ¿Es la edad menor de 32 años?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><strong>¿La edad es mayor o igual que 38 años?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>edad <span class="sc">&gt;=</span> <span class="dv">38</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="variables-de-fecha" class="slide level2">
<h2>Variables de fecha</h2>
<p>Un tipo de datos muy especial: los <span class="hl-yellow"><strong>datos de tipo fecha</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>fecha_char <span class="ot">&lt;-</span> <span class="st">"2021-04-21"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Parece una simple cadena de texto pero <span class="hl-yellow"><strong>representa un instante en el tiempo</strong></span>. ¿Qué debería suceder si <span class="hl-purple"><strong>sumamos un 1 a una fecha</strong></span>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>fecha_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in fecha_char + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Las fechas <span class="hl-red"><strong>no pueden ser texto</strong></span>: debemos convertir la cadena de texto a fecha con <code>as_date()</code> del paquete <code>{lubridate}</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="fu">library</span>(lubridate) <span class="co"># instala si no lo has hecho</span></span>
<span id="cb62-2"><a href="#cb62-2"></a>fecha <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"2023-03-28"</span>)</span>
<span id="cb62-3"><a href="#cb62-3"></a>fecha <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-29"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">class</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
</div>
</section>
<section id="variables-de-fecha-1" class="slide level2">
<h2>Variables de fecha</h2>
<p>En dicho paquete tenemos funciones muy útiles para <span class="hl-yellow"><strong>manejar fechas</strong></span>:</p>
<ul>
<li>Con <code>today()</code> podemos obtener directamente la <span class="hl-purple"><strong>fecha actual</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-05-04"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>now()</code> podemos obtener la <span class="hl-purple"><strong>fecha y hora actual</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-05-04 01:12:32 -05"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>Con <code>year()</code>, <code>month()</code> o <code>day()</code> podemos <span class="hl-purple"><strong>extraer el año, mes y día</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>fecha <span class="ot">&lt;-</span> <span class="fu">today</span>()</span>
<span id="cb70-2"><a href="#cb70-2"></a><span class="fu">year</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2023</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a><span class="fu">month</span>(fecha)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="resúmenes-de-paquetes" class="slide level2">
<h2>Resúmenes de paquetes</h2>

<img data-src="img/lubridate.png" class="r-stretch"><div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Amplia contenido</strong></p>
</div>
<div class="callout-content">
<p>Tienes un resumen en pdf de los paquetes más importantes en la <span class="hl-green"><strong>carpeta «fichas paquetes»</strong></span></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-1" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-2-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-2-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-2-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p>📝 Define una variable que guarde tu edad y otra con tu nombre</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>edad <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>nombre <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2">
<p>📝 Define otra variable que responda la pregunta «¿tengo hermanos?» y otra con la fecha de tu nacimiento.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>hermanos <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb75-2"><a href="#cb75-2"></a></span>
<span id="cb75-3"><a href="#cb75-3"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb75-4"><a href="#cb75-4"></a>fecha_nacimiento <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"1989-09-10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-3">
<p>📝 Define otra variable con tus apellidos y junta con <code>glue()</code> las variables <code>nombre</code> y <code>apellidos</code> (una coma entre ellos) en una sola variable <code>nombre_completo</code>.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>apellidos <span class="ot">&lt;-</span> <span class="st">"Álvarez Liébana"</span></span>
<span id="cb76-2"><a href="#cb76-2"></a><span class="fu">glue</span>(<span class="st">"{nombre}, {apellidos}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-4">
<p>📝 Calcula los días que han pasado desde la fecha de tu nacimiento, haciendo la resta entre la fecha de hoy y la fecha de nacimiento definida en el ejercicio 2.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a><span class="fu">today</span>() <span class="sc">-</span> fecha_nacimiento</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="primeros-datos-vectores" class="title-slide slide level1 center">
<h1>Primeros datos: vectores</h1>
<p><span style="color:#444442;"><strong>¿Cómo concatenamos valores? ¿Cómo creamos una columna?</strong></span></p>
</section>
<section id="vectores-concatenar" class="slide level2">
<h2>Vectores: concatenar</h2>
<p>Cuando trabajamos con datos normalmente tendremos <span class="hl-yellow"><strong>columnas que representan variables</strong></span>: llamaremos <span class="hl-yellow"><strong>vectores</strong></span> a una <span class="hl-purple"><strong>concatenación</strong></span> de variables del <span class="hl-purple"><strong>mismo tipo</strong></span></p>
<p>&nbsp;</p>
<div class="fragment">
<p>La forma más sencilla es con el comando <code>c()</code> (c de <strong>concatenar</strong>), y basta con introducir sus elementos entre paréntesis y separados por comas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">60</span>, <span class="dv">61</span>)</span>
<span id="cb78-2"><a href="#cb78-2"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33 27 60 61</code></pre>
</div>
</div>
<p>&nbsp;</p>
</div>
<div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Un número individual <code>x &lt;- 1</code> es en realidad un vector de longitud uno.</p>
</div>
</div>
</div>
</div>
</section>
<section id="vectores-concatenar-1" class="slide level2">
<h2>Vectores: concatenar</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/edades_environment.jpg"></p>
</div><div class="column" style="width:60%;">
<p>Como ves ahora en el <code>environment</code> tenemos una <strong>colección de elementos</strong> guardada</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>edades</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33 27 60 61</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>La <span class="hl-yellow"><strong>longitud de un vector</strong></span> se puede calcular con <code>length()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a><span class="fu">length</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>También podemos <span class="hl-yellow"><strong>concatenar vectores</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="fu">c</span>(edades, edades, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33 27 60 61 33 27 60 61  8</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>En muchas ocasiones querremos crear <span class="hl-yellow"><strong>secuencias numéricas</strong></span> (por ejemplo, los días del mes). El comando <code>seq(inicio, fin)</code> nos permite crear una <strong>secuencia</strong> desde un elemento inicial hasta uno final, <span class="hl-purple"><strong>avanzando de uno en uno</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">31</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>El comando <code>1:n</code> nos devuelve lo mismo que <code>seq(1, n)</code> (si el elemento inicial es mayor que el final, entenderá que la secuencia es <strong>decreciente</strong>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="dv">7</span><span class="sc">:-</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7  6  5  4  3  2  1  0 -1 -2 -3</code></pre>
</div>
</div>
</div>
</section>
<section id="secuencias-numéricas-1" class="slide level2">
<h2>Secuencias numéricas</h2>
<p>También podemos definir <span class="hl-yellow"><strong>otro tipo de distancia</strong></span> (paso) entre consecutivos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="fl">0.5</span>) <span class="co"># secuencia desde 1 a 7 de 0.5 en 0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0</code></pre>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>Otras veces nos interesará definir una <span class="hl-yellow"><strong>secuencia con una longitud concreta</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">7</span>) <span class="co"># secuencia desde 1 a 50 de longitud 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.000000  9.166667 17.333333 25.500000 33.666667 41.833333 50.000000</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>Incluso puede nos interese generar un vector de <span class="hl-yellow"><strong>n elementos repetidos</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>) <span class="co"># vector de 7 ceros</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 0 0</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>Un vector es una <strong>concatenación</strong> de elementos del <span class="hl-yellow"><strong>mismo tipo</strong></span>, pero no tienen porque ser necesariamente números. Vamos a crear una frase de ejemplo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a>frase <span class="ot">&lt;-</span> <span class="st">"Me llamo Javi"</span></span>
<span id="cb98-2"><a href="#cb98-2"></a>frase</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me llamo Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a><span class="fu">length</span>(frase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>En el caso anterior no era un vector, era un solo elemento de texto. Para crear un vector debemos usar de nuevo <code>c()</code> y separar elementos entre comas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Me"</span>, <span class="st">"llamo"</span>, <span class="st">"Javi"</span>)</span>
<span id="cb102-2"><a href="#cb102-2"></a>vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Me"    "llamo" "Javi" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a><span class="fu">length</span>(vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</section>
<section id="vectores-de-caracteres-1" class="slide level2">
<h2>Vectores de caracteres</h2>
<p>¿Qué sucederá si <span class="hl-yellow"><strong>concatenamos elementos de diferente tipo</strong></span>?</p>
<p>&nbsp;</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">"javi"</span>, <span class="st">"3"</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"    "2"    "javi" "3"    "TRUE"</code></pre>
</div>
</div>
<p>Fíjate que como todos tienen que ser del mismo tipo, lo que hace <code>R</code> es <span class="hl-yellow"><strong>convertir</strong></span> todo a texto, violando la <span class="hl-red"><strong>integridad del dato</strong></span></p>
<p>&nbsp;</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 1 0</code></pre>
</div>
</div>
<p>Es importante entender que los valores lógicos en realidad están <span class="hl-yellow"><strong>almacenados internamente como 0/1</strong></span></p>
</div>
</section>
<section id="operaciones-con-vectores" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Con los vectores numéricos podemos hacer las mismas <span class="hl-yellow"><strong>operaciones aritméticas</strong></span> que con los números <span class="fragment fade-in">→ un <span class="hl-purple"><strong>número es un vector</strong></span> (de longitud uno)</span></p>
<div class="fragment">
<p>¿Qué sucederá si <span class="hl-yellow"><strong>sumamos o restamos un valor</strong></span> a un vector?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb110-2"><a href="#cb110-2"></a>x <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a>x <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  6 10 14</code></pre>
</div>
</div>
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Salvo que indiquemos lo contrario, en <code>R</code> las operaciones con vectores son siempre <span class="hl-orange"><strong>elemento a elemento</strong></span></p>
</div>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-1" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Los vectores también pueden interactuar entre ellos, así que podemos definir, por ejemplo, <span class="hl-yellow"><strong>sumas de vectores</strong></span> (elemento a elemento)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb114-2"><a href="#cb114-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb114-3"><a href="#cb114-3"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Dado que la operación (por ejemplo, una suma) se realiza elemento a elemento, ¿qué sucederá si <span class="hl-yellow"><strong>sumamos dos vectores de distinta longitud</strong></span>?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb116-2"><a href="#cb116-2"></a>x <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11  9</code></pre>
</div>
</div>
<p>Lo que hace es <span class="hl-yellow"><strong>reciclar elementos</strong></span>: si tiene un vector de 4 elementos y sumamos otro de 3 elementos, lo que hará será reciclar del vector con menor longitud.</p>
</div>
</section>
<section id="operaciones-con-vectores-2" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Una operación muy habitual es <span class="hl-yellow"><strong>preguntar a los datos</strong></span> mediante el uso de <span class="hl-purple"><strong>condiciones lógicas</strong></span>. Por ejemplo, si definimos un vector de temperaturas…</p>
<p><span class="hl-yellow"><strong>¿Qué días hizo menos de 22 grados?</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">15</span>, <span class="dv">29</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1"></a>x <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>Nos devolverá un <span class="hl-yellow"><strong>vector lógico</strong></span>, en función de si <strong>cada elemento</strong> cumple o no la condición pedida.</p>
</div>
<div class="fragment">
<p>Si tuviéramos un <span class="hl-yellow"><strong>dato ausente</strong></span> (por error del aparato ese día), la condición evaluada también sería <code>NA</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">7</span>, <span class="dv">29</span>, <span class="dv">10</span>)</span>
<span id="cb121-2"><a href="#cb121-2"></a>y <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE    NA FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-3" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Las <span class="hl-yellow"><strong>condiciones lógicas pueden ser combinadas</strong></span> de dos maneras:</p>
<ul>
<li><span class="hl-yellow"><strong>Intersección</strong></span>: <span class="hl-purple"><strong>todas</strong></span> las condiciones concatenadas se deben cumplir (<span class="hl-purple"><strong>conjunción y</strong></span> con <code>&amp;</code>) para devolver un <code>TRUE</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<ul>
<li><span class="hl-yellow"><strong>Unión</strong></span>: basta con que <span class="hl-purple"><strong>al menos una</strong></span> se cumpla (<span class="hl-purple"><strong>conjunción o</strong></span> con <code>|</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="fragment">
<p>Con <code>any()</code> y <code>all()</code> podemos comprobar que <span class="hl-yellow"><strong>todos los elementos</strong></span> cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-4" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>También podemos hacer uso de <span class="hl-yellow"><strong>operaciones estadísticas</strong></span> como por ejemplo <code>sum()</code> que, dado un vector, nos devuelve la suma de todos sus elementos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb131-2"><a href="#cb131-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-yellow"><strong>¿Qué sucede cuando falta un dato (ausente)?</strong></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb133-2"><a href="#cb133-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>Por defecto, si tenemos un dato ausente, la <span class="hl-yellow"><strong>operación también será ausente</strong></span>. Para poder <span class="hl-purple"><strong>obviar ese dato</strong></span>, usamos un argumento opcional <code>na.rm = TRUE</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-5" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Como hemos comentado que los valores lógicos son guardados internamente como 0 y 1, podremos usarlos en operaciones aritméticas.</p>
<p>&nbsp;</p>
<p>Por ejemplo, si queremos <span class="hl-yellow"><strong>averiguar el número de elementos que cumplen una condición</strong></span> (por ejemplo, menores que 3), los que lo hagan tendrán asignado un 1 (<code>TRUE</code>) y los que no un 0 (<code>FALSE</code>) , por lo que basta con sumar dicho vector lógico para obtener el número de elementos que cumplen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb137-2"><a href="#cb137-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="operaciones-con-vectores-6" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<p>&nbsp;</p>
<ul>
<li><span class="hl-yellow"><strong>Media</strong></span>: medida de centralidad que consiste en sumar todos los elementos y dividirlos entre la cantidad de elementos sumados. La más conocida pero la <span class="hl-red"><strong>menos robusta</strong></span>: dado un conjunto, si se introducen valores atípicos o outliers (valores muy grandes o muy pequeños), la media se perturba con mucha facilidad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="cn">NA</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb139-2"><a href="#cb139-2"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 169.8889</code></pre>
</div>
</div>
</section>
<section id="operaciones-con-vectores-7" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otras operaciones habituales son la <span class="hl-yellow"><strong>media</strong></span>, <span class="hl-yellow"><strong>mediana</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<p>&nbsp;</p>
<ul>
<li><span class="hl-yellow"><strong>Mediana</strong></span>: medida de centralidad que consiste en ordenar los elementos y quedarse con el que ocupa la mitad.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb141-2"><a href="#cb141-2"></a><span class="fu">median</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 170</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Percentiles</strong></span>: medidas de posición (nos dividen en partes iguales los datos).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1"></a><span class="fu">quantile</span>(x) <span class="co"># por defecto percentiles 0-25-50-75-100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0%  25%  50%  75% 100% 
 150  165  170  177  191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a><span class="fu">quantile</span>(x, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  10%   40%   90% 
154.0 167.6 183.0 </code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-8" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otra operación muy habitual es la de <span class="hl-yellow"><strong>acceder a elementos</strong></span> del mismo. La forma más sencilla es usar el operador <code>[i]</code> (acceder al elemento i-ésimo)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">33</span>, <span class="cn">NA</span>, <span class="dv">61</span>) </span>
<span id="cb147-2"><a href="#cb147-2"></a>edades[<span class="dv">3</span>] <span class="co"># accedemos a la edad de la tercera persona </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>Dado que un número no es más que un vector de longitud uno, esta operación también la podemos aplicar usando un <span class="hl-yellow"><strong>vector de índices a seleccionar</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"hola"</span>, <span class="st">"qué"</span>, <span class="st">"tal"</span>, <span class="st">"estás"</span>, <span class="st">"?"</span>)</span>
<span id="cb149-2"><a href="#cb149-2"></a>y[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># primer, segundo y cuarto elemento</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qué"   "estás"</code></pre>
</div>
</div>
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Para acceder al último, sin preocuparnos de cuál, podemos pasarle como índice la longitud <code>x[length(x)]</code></p>
</div>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-9" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Otras veces no querremos seleccionar sino <span class="hl-yellow"><strong>eliminar algunos elementos</strong></span>. Deberemos repetir la misma operación pero con el signo - delante: el operador <code>[-i]</code> no selecciona el elemento i-ésimo del vector sino que lo «des-selecciona»</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "qué"   "tal"   "estás" "?"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1"></a>y[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hola"  "tal"   "estás" "?"    </code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>En muchas ocasiones los queremos <span class="hl-yellow"><strong>seleccionar o eliminar en base a condiciones lógicas</strong></span>, en función de los valores, así que pasaremos como índice la propia condición (recuerda, <code>x &lt; 2</code> nos devuelve un vector lógico)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">30</span>, <span class="dv">17</span>, <span class="dv">45</span>)</span>
<span id="cb155-2"><a href="#cb155-2"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"maría"</span>, <span class="st">"laura"</span>, <span class="st">"carla"</span>, <span class="st">"luis"</span>)</span>
<span id="cb155-3"><a href="#cb155-3"></a>nombres[edades <span class="sc">&lt;</span> <span class="dv">18</span>] <span class="co"># nombres de los menores de edad</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "carla"</code></pre>
</div>
</div>
</div>
</section>
<section id="operaciones-con-vectores-10" class="slide level2">
<h2>Operaciones con vectores</h2>
<p>Por último, una acción habitual es saber <span class="hl-yellow"><strong>ordenar valores</strong></span>:</p>
<ul>
<li><code>sort()</code>: devuelve el <span class="hl-yellow"><strong>vector ordenado</strong></span>. Por defecto de menor a mayor pero con <code>decreasing = TRUE</code> podemos cambiarlo</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="dv">7</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">65</span>, <span class="dv">20</span>, <span class="dv">33</span>, <span class="dv">23</span>, <span class="dv">77</span>)</span>
<span id="cb157-2"><a href="#cb157-2"></a><span class="fu">sort</span>(edades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 20 23 25 33 41 65 77 81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1"></a><span class="fu">sort</span>(edades, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81 77 65 41 33 25 23 20  7</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>order()</code>: devuelve el <span class="hl-yellow"><strong>vector de índices</strong></span> que tendríamos que usar para tener el vector ordenado</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1"></a><span class="fu">order</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 6 1 7 2 8 9 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1"></a>x[<span class="fu">order</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 155 165 167 170 173 177 181 191</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-2" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-3-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-3-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-3-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-3-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-3-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<p>📝 Define el vector <code>x</code> como la concatenación de los 5 primeros números impares, y calcula su suma.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1"></a><span class="co"># Dos formas</span></span>
<span id="cb165-2"><a href="#cb165-2"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb165-3"><a href="#cb165-3"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb165-4"><a href="#cb165-4"></a></span>
<span id="cb165-5"><a href="#cb165-5"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-2">
<p>📝 Obtén los elementos de <code>x</code> mayores que 4. Calcula el número de elementos de <code>x</code> mayores que 4.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">4</span>]</span>
<span id="cb166-2"><a href="#cb166-2"></a><span class="fu">sum</span>(x <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-3">
<p>📝 Calcula el vector <code>1/x</code> y obtén la versión ordenada (de menor a mayor).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb167-2"><a href="#cb167-2"></a><span class="fu">sort</span>(z)</span>
<span id="cb167-3"><a href="#cb167-3"></a>z[<span class="fu">order</span>(z)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-4">
<p>📝 Encuentra el máximo y el mínimo del vector <code>x</code></p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1"></a><span class="fu">min</span>(x)</span>
<span id="cb168-2"><a href="#cb168-2"></a><span class="fu">max</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-5">
<p>📝 Encuentra del vector <code>x</code> los elementos mayores (estrictos) que 1 y menores (estrictos) que 7. Encuentra una forma de averiguar si todos los elementos son o no positivos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb169-2"><a href="#cb169-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-6">
<p>📝 Dado el vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, extrae los elementos que ocupan los lugares 1, 2, 5, 6. Elimina del vector el segundo elemento. Tras eliminarlo determina su suma y su media</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb170-2"><a href="#cb170-2"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</span>
<span id="cb170-3"><a href="#cb170-3"></a>y <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb170-4"><a href="#cb170-4"></a><span class="fu">sum</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb170-5"><a href="#cb170-5"></a><span class="fu">mean</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="primera-base-de-datos" class="title-slide slide level1 center">
<h1>Primera base de datos</h1>
<p><span style="color:#444442;"><strong>¿Cómo construimos una tabla? Matrices, data.frame y tibble</strong></span></p>
</section>
<section id="primer-intento-matrices" class="slide level2">
<h2>Primer intento: matrices</h2>
<p>Cuando analizamos datos solemos tener <span class="hl-yellow"><strong>varias variables</strong></span> de cada individuo: necesitamos una «tabla» que las recopile. La opción más inmediata son las <span class="hl-yellow"><strong>matrices</strong></span>: concatenación de variables del <span class="hl-purple"><strong>mismo tipo e igual longitud</strong></span>.</p>
<div class="fragment">
<p>Imagina que tenemos estaturas y pesos de 4 personas. ¿Cómo <span class="hl-yellow"><strong>crear un dataset con las dos variables</strong></span>? Con <code>cbind()</code> concatenamos en forma de columnas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1"></a>estaturas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">160</span>, <span class="dv">170</span>, <span class="dv">180</span>)</span>
<span id="cb171-2"><a href="#cb171-2"></a>pesos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>)</span>
<span id="cb171-3"><a href="#cb171-3"></a><span class="fu">cbind</span>(estaturas, pesos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     estaturas pesos
[1,]       150    60
[2,]       160    70
[3,]       170    80
[4,]       180    90</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p><span class="hl-red"><strong>No profundizaremos</strong></span> más ya que nuestro objetivo es tener variables de misma longitud pero <span class="hl-yellow"><strong>tipos diferentes</strong></span> (pero que sepas que existen).</p>
</div>
</section>
<section id="segundo-intento-data.frame" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Las matrices tienen el mismo problema que los vectores: si juntamos datos de distinto tipo, se <span class="hl-red"><strong>perturba la integridad del dato</strong></span> ya que los convierte</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1"></a>edades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">24</span>, <span class="cn">NA</span>)</span>
<span id="cb173-2"><a href="#cb173-2"></a>soltero <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>)</span>
<span id="cb173-3"><a href="#cb173-3"></a>nombres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>, <span class="st">"lucía"</span>)</span>
<span id="cb173-4"><a href="#cb173-4"></a><span class="fu">cbind</span>(edades, soltero, nombres)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     edades soltero nombres
[1,] "14"   "TRUE"  "javi" 
[2,] "24"   NA      "laura"
[3,] NA     "FALSE" "lucía"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Para poder trabajar con <span class="hl-yellow"><strong>variables de distinto tipo</strong></span> haremos uso de lo que se conoce como <span class="hl-yellow"><strong>data.frame</strong></span>: una variables de igual longitud pero <span class="hl-purple"><strong>tipo distinto</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(edades, soltero, nombres)</span>
<span id="cb175-2"><a href="#cb175-2"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edades soltero nombres
1     14    TRUE    javi
2     24      NA   laura
3     NA   FALSE   lucía</code></pre>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-1" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edades soltero nombres
1     14    TRUE    javi
2     24      NA   laura
3     NA   FALSE   lucía</code></pre>
</div>
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1"></a><span class="fu">class</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<p>Dado que un <code>data.frame</code> es ya una «base de datos» las variables no son meros vectores matemáticos: <span class="hl-yellow"><strong>tienen un significado</strong></span> y podemos (debemos) <span class="hl-purple"><strong>ponerles nombres</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb181-2"><a href="#cb181-2"></a>tabla <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"edad"</span> <span class="ot">=</span> edades, <span class="st">"estado"</span> <span class="ot">=</span> soltero, <span class="st">"nombre"</span> <span class="ot">=</span> nombres,</span>
<span id="cb181-3"><a href="#cb181-3"></a>             <span class="st">"f_nacimiento"</span> <span class="ot">=</span> <span class="fu">as_date</span>(<span class="fu">c</span>(<span class="st">"1989-09-10"</span>, <span class="st">"1992-04-01"</span>, <span class="st">"1980-11-27"</span>)))</span>
<span id="cb181-4"><a href="#cb181-4"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
1   14   TRUE   javi   1989-09-10
2   24     NA  laura   1992-04-01
3   NA  FALSE  lucía   1980-11-27</code></pre>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-2" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p><span class="hl-yellow"><strong>¡TENEMOS NUESTRO PRIMER CONJUNTO DE DATOS!</strong></span> Puedes visualizarlo escribiendo su nombre en consola o con <code>View(tabla)</code></p>

<img data-src="img/view_tabla.jpg" class="r-stretch"></section>
<section id="segundo-intento-data.frame-3" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<p>Si queremos acceder a sus elementos, el operador será similar al de los vectores: ahora <span class="hl-yellow"><strong>tenemos dos índices</strong></span> (filas y columnas, dejando libre la que no usemos)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1"></a>tabla[<span class="dv">2</span>, ]  <span class="co"># segunda fila (todas sus variables)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  edad estado nombre f_nacimiento
2   24     NA  laura   1992-04-01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1"></a>tabla[, <span class="dv">3</span>]  <span class="co"># tercera columna (de todos los individuos)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "laura" "lucía"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1"></a>tabla[<span class="dv">2</span>, <span class="dv">1</span>]  <span class="co"># primera característica de la segunda persona</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/menu_data_frame.jpg"></p>
</div><div class="column" style="width:65%;">
<p>También tiene ventajas de una <span class="hl-yellow"><strong>«base» de datos</strong></span> : podemos <span class="hl-purple"><strong>aceder a las variables por su nombre</strong></span> (recomendable ya que las variables pueden cambiar de posición), poniendo el nombre de la tabla seguido del símbolo <code>$</code> (con el <strong>tabulador</strong>, nos aparecerá un menú de columnas a elegir)</p>
</div>
</div>
</div>
</section>
<section id="segundo-intento-data.frame-4" class="slide level2">
<h2>Segundo intento: data.frame</h2>
<ul>
<li><code>names()</code>: nos muestra los nombres de las variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1"></a><span class="fu">names</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "edad"         "estado"       "nombre"       "f_nacimiento"</code></pre>
</div>
</div>
<p>&nbsp;</p>
<div class="fragment">
<ul>
<li><code>dim()</code>: nos muestra las dimensiones (también <code>nrow()</code> y <code>ncol()</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1"></a><span class="fu">dim</span>(tabla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
<p>&nbsp;</p>
</div>
<div class="fragment">
<ul>
<li>Podemos acceder a las variables por su nombre</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1"></a>tabla[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="st">"nombre"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "lucía"</code></pre>
</div>
</div>
</div>
</section>
<section id="intento-final-tibble" class="slide level2">
<h2>Intento final: tibble</h2>
<p>Las tablas en formato <code>data.frame</code> tienen algunas <span class="hl-red"><strong>limitaciones</strong></span></p>
<p>La principal es que <span class="hl-red"><strong>no permite la recursividad</strong></span>: imagina que definimos una base de datos con estaturas y pesos, y queremos una tercera variable con el IMC</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1"></a><span class="fu">data.frame</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb195-2"><a href="#cb195-2"></a>           <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in data.frame(estatura = c(1.7, 1.8, 1.6), peso = c(80, 75, 70), : object 'peso' not found</code></pre>
</div>
</div>
<div class="fragment">
<p>&nbsp;</p>
<p>De ahora en adelante usaremos el formato <code>tibble</code> (un <span class="hl-yellow"><strong>data.frame mejorado</strong></span>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb197-2"><a href="#cb197-2"></a><span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb197-3"><a href="#cb197-3"></a>       <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
</div>
</section>
<section id="intento-final-tibble-1" class="slide level2">
<h2>Intento final: tibble</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1"></a>tabla <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"estatura"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"peso"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb199-2"><a href="#cb199-2"></a>                <span class="st">"IMC"</span> <span class="ot">=</span> peso <span class="sc">/</span> (estatura<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb199-3"><a href="#cb199-3"></a>tabla</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  estatura  peso   IMC
     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      1.7    80  27.7
2      1.8    75  23.1
3      1.6    70  27.3</code></pre>
</div>
</div>
<p>Las tablas en formato <code>tibble</code> nos permitirá una <span class="hl-yellow"><strong>gestión más ágil, eficiente y coherente</strong></span> de los datos, con 4 ventajas principales:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Metainformación</strong></span>: si te fijas en la cabecera, nos dice ya automáticamente el número de filas y columnas, y el tipo de cada variable</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Recursividad</strong></span>: permite definir las variables secuencialmente (como hemos visto)</li>
</ul>
</div>
</section>
<section id="intento-final-tibble-2" class="slide level2">
<h2>Intento final: tibble</h2>
<ul>
<li><span class="hl-yellow"><strong>Consistencia</strong></span>: si accedes a una columna que no existe avisa con un warning</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1"></a>tabla<span class="sc">$</span>invent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `invent`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Por filas</strong></span>: crear por filas (copiar y pegar de una tabla) con <code>tribble()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>colA, <span class="sc">~</span>colB,</span>
<span id="cb204-2"><a href="#cb204-2"></a>        <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb204-3"><a href="#cb204-3"></a>        <span class="st">"b"</span>,   <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  colA   colB
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>El paquete <code>{datapasta}</code> nos permite <span class="hl-green"><strong>copiar y pegar</strong></span> tablas de páginas web y documentos sencillos</p>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-3" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-4-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-4-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-4-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-4-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-4-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<p>📝 Carga del paquete <code>{datasets}</code> el conjunto de datos <code>airquality</code> (contiene variables de la calidad del aire de la ciudad de Nueva York desde mayo hasta septiembre de 1973). ¿Es el conjunto de datos airquality de tipo tibble? En caso negativo, conviértelo a tibble (busca en la documentación del paquete en <a href="https://tibble.tidyverse.org/index.html" class="uri">https://tibble.tidyverse.org/index.html</a>).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb206-2"><a href="#cb206-2"></a><span class="fu">class</span>(datasets<span class="sc">::</span>airquality)</span>
<span id="cb206-3"><a href="#cb206-3"></a>airquality_tb <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(datasets<span class="sc">::</span>airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-2">
<p>📝 Una vez convertido a <code>tibble</code> obtén el nombre de las variables y las dimensiones del conjunto de datos. ¿Cuántas variables hay? ¿Cuántos días se han medido?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1"></a><span class="fu">names</span>(airquality_tb)</span>
<span id="cb207-2"><a href="#cb207-2"></a><span class="fu">ncol</span>(airquality_tb)</span>
<span id="cb207-3"><a href="#cb207-3"></a><span class="fu">nrow</span>(airquality_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-3">
<p>📝 Filtra solo los datos del mes de agosto.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-4">
<p>📝 Selecciona aquellos datos que no sean ni de julio ni de agosto.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1"></a>airquality_tb[Month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-5">
<p>📝 Modifica el siguiente código para quedarte solo con las variable de ozono y temperatura.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1"></a>airquality_tb[, <span class="fu">c</span>(<span class="st">"Ozone"</span>, <span class="st">"Temp"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-6">
<p>📝 Selecciona los datos de temperatura y viento de agosto. Traduce a castellano el nombre de las columnas del conjunto filtrado.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1"></a>airquality_tb[Month <span class="sc">==</span> <span class="dv">8</span>, <span class="fu">c</span>(<span class="st">"Temp"</span>, <span class="st">"Wind"</span>)]</span>
<span id="cb211-2"><a href="#cb211-2"></a><span class="fu">names</span>(airquality_tb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ozono"</span>, <span class="st">"rad_solar"</span>, <span class="st">"viento"</span>, <span class="st">"temp"</span>, <span class="st">"mes"</span>, <span class="st">"dia"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="r-base-vs-tidyverse" class="title-slide slide level1 center">
<h1>R base vs Tidyverse</h1>
<p><span style="color:#444442;"><strong>Spoiler: un multiverso de datos limpios</strong></span></p>
</section>
<section id="r-base-vs-tidyverse-1" class="slide level2">
<h2>R base vs Tidyverse</h2>
<p>Si conoces algún otro lenguaje de programación (o tienes gente cercana que programa) te extrañará que aún no hayamos hablado de conceptos habituales como</p>
<ul>
<li><p><span class="hl-yellow"><strong>Bucles for</strong></span>: repetir un código un número fijo de iteraciones.</p></li>
<li><p><span class="hl-yellow"><strong>Bucles while</strong></span>: repetir un código hasta que se cumpla una condición</p></li>
<li><p><span class="hl-yellow"><strong>Estructuras if-else</strong></span>: estructuras de control para decidir por donde camina el código en función del valor de las variables.</p></li>
</ul>
<p>&nbsp;</p>
<div class="fragment">
<p>Y aunque conocer dichas estructuras puede sernos en algún momento interesante, en la <span class="hl-red"><strong>mayoría de ocasiones vamos a poder evitarlas</strong></span> (en especial los bucles) <span class="fragment fade-in">→ en lugar de trabajar con lo que se conoce como R Base vamos a vertebrar el curso en torno a <span class="hl-yellow"><strong>Tidyverse</strong></span></span></p>
</div>
</section>
<section id="qué-es-tidyverse" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/flow_tidyverse.jpg"></p>
</div>
</div>
<p><code>{tidyverse}</code> es un <span class="hl-yellow"><strong>«universo» de paquetes</strong></span> para garanatizar un flujo de trabajo (de inicio a fin) eficiente, coherente y lexicográficamente sencillo de entender, basado en la idea de que <span class="hl-purple"><strong>nuestros datos están limpios y ordenados (tidy)</strong></span></p>
</section>
<section id="qué-es-tidyverse-1" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: optimizando data.frame</li>
<li><code>{tidyr}</code>: limpieza de datos</li>
<li><code>{readr}</code>: carga datos rectangulares (.csv)</li>
<li><code>{dplyr}</code>: gramática para depurar</li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{ggplot2}</code>: visualización de datos</li>
<li><code>{tidymodels}</code>: modelización/predicción</li>
</ul>
</div>
</div>
<p>También tenemos los paquetes <code>{purrr}</code> para el manejo de listas, <code>{forcast}</code> para cualitativas, <code>{lubridate}</code> para fechas, <code>{readxl}</code> para importar archivos .xls y .xlsx, <code>{rvest}</code> para web scraping y <code>{rmarkdown}</code> para comunicar resultados.</p>
</section>
<section id="qué-es-tidyverse-2" class="slide level2">
<h2>¿Qué es tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizando data.frame</strong></span></li>
<li><code>{tidyr}</code>: <span class="hl-yellow"><strong>limpieza de datos</strong></span></li>
<li><code>{readr}</code>: <span class="hl-yellow"><strong>carga datos</strong></span> rectangulares (.csv)</li>
<li><code>{dplyr}</code>: <span class="hl-yellow"><strong>gramática para depurar</strong></span></li>
<li><code>{stringr}</code>: manejo de textos</li>
<li><code>{ggplot2}</code>: visualización de datos</li>
<li><code>{tidymodels}</code>: modelización/predicción</li>
</ul>
</div>
</div>
<p>También tenemos los paquetes <code>{purrr}</code> para el manejo de listas, <code>{forcast}</code> para cualitativas, <code>{lubridate}</code> para fechas, <code>{readxl}</code> para importar archivos .xls y .xlsx, <code>{rvest}</code> para web scraping y <code>{rmarkdown}</code> para comunicar resultados.</p>
</section>
<section id="filosofía-base-tidy-data" class="slide level2">
<h2>Filosofía base: tidy data</h2>
<blockquote>
<p>Tidy datasets are all alike, but every messy dataset is messy in its own way (Hadley Wickham, Chief Scientist en RStudio)</p>
</blockquote>
<div style="font-size:120px; text-align: center; color:#F8DF58;">
<b>TIDY</b><span style="color:#CAB0EE;"><b>VERSE</b></span>
</div>
<p>El <span class="hl-purple"><strong>universo</strong></span> de paquetes <code>{tidyverse}</code> se basa en la idea introducido por <strong>Hadley Wickham</strong> (el Dios al que rezo) de <span class="hl-yellow"><strong>estandarizar</strong></span> el formato los datos para</p>
<div>
<ul>
<li class="fragment"><span class="hl-green"><strong>sistematizar</strong></span> la depuración</li>
<li class="fragment">hacer más <span class="hl-green"><strong>sencillo</strong></span> su manipulación.</li>
<li class="fragment">código <span class="hl-green"><strong>legible</strong></span></li>
</ul>
</div>
</section>
<section id="reglas-del-tidy-data" class="slide level2">
<h2>Reglas del tidy data</h2>
<p>Lo primero por tanto será entender qué son los <span class="hl-yellow"><strong>conjuntos tidydata</strong></span> ya que todo <code>{tidyverse}</code> se basa en que los datos están estandarizados.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-in">
<ol type="1">
<li>Cada <span class="hl-yellow"><strong>variable</strong></span> en una <span class="hl-purple"><strong>única columna</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="2" type="1">
<li>Cada <span class="hl-yellow"><strong>individuo</strong></span> en una <span class="hl-purple"><strong>fila diferente</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="3" type="1">
<li>Cada <span class="hl-yellow"><strong>celda</strong></span> con un <span class="hl-purple"><strong>único valor</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="4" type="1">
<li>Cada <span class="hl-yellow"><strong>dataset</strong></span> en un <span class="hl-purple"><strong>tibble</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="5" type="1">
<li>Si queremos cruzar <span class="hl-yellow"><strong>múltiples tablas</strong></span> debemos tener una <span class="hl-purple"><strong>columna común</strong></span></li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
</section>
<section id="tubería-pipe" class="slide level2">
<h2>Tubería (pipe)</h2>
<p>En <code>{tidyverse}</code> será clave el <span class="hl-yellow"><strong>operador pipe (tubería)</strong></span> definido como <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>): será una <span class="hl-yellow"><strong>tubería que recorre los datos</strong></span> y los transforma.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>En R base, si queremos aplicar tres funciones <code>first()</code>, <code>second()</code> y <code>third()</code> en orden, sería</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1"></a><span class="fu">third</span>(<span class="fu">second</span>(<span class="fu">first</span>(datos)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>En <code>{tidyverse}</code> podremos <span class="hl-yellow"><strong>leer de izquierda a derecha</strong></span> y separar los datos de las acciones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">first</span>() <span class="sc">|&gt;</span> <span class="fu">second</span>() <span class="sc">|&gt;</span> <span class="fu">third</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>&nbsp;</p>
</div>
<div class="fragment">
<div class="callout callout-caution callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Apunte importante</strong></p>
</div>
<div class="callout-content">
<p>Desde la versión 4.1.0 de <code>R</code> disponemos de <code>|&gt;</code>, un pipe <strong>nativo</strong> disponible <span class="hl-purple"><strong>fuera de tidyverse</strong></span>, sustituyendo al <span class="hl-red"><strong>antiguo pipe</strong></span> <code>%&gt;%</code> que dependía del paquete <code>{magrittr}</code> (bastante problemático).</p>
</div>
</div>
</div>
</div>
</section>
<section id="tubería-pipe-1" class="slide level2">
<h2>Tubería (pipe)</h2>
<p>La principal ventaja es que el <span class="hl-yellow"><strong>código sea muy legible (casi literal)</strong></span> pudiendo hacer grandes operaciones con los datos con apenas código.</p>
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb214-2"><a href="#cb214-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-3"><a href="#cb214-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-4"><a href="#cb214-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-5"><a href="#cb214-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-6"><a href="#cb214-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-7"><a href="#cb214-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-8"><a href="#cb214-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-9"><a href="#cb214-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-10"><a href="#cb214-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb214-11"><a href="#cb214-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<center>
<img src="img/logo_pipe.png" width="360px">
</center>
</div>
</div>
</section>
<section id="datos-sucios-messy-data" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>¿Pero qué aspecto tienen los <span class="hl-yellow"><strong>datos no tidy</strong></span>? Vamos a cargar la tabla <code>table4a</code> del paquete <code>{tidyr}</code> (ya lo tenemos cargado del entorno tidyverse).</p>
<p>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb215-2"><a href="#cb215-2"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
* &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_longer" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  country     `1999` `2000`
* &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>❎ Cada <span class="hl-red"><strong>fila representa dos observaciones</strong></span> (1999 y 2000) → las columnas <code>1999</code> y <code>2000</code> en realidad deberían ser en sí <span class="hl-yellow"><strong>valores de una variable</strong></span> y no nombres de columnas.</p>
</div>
</div>
<div class="fragment">
<p>Incluiremos una <span class="hl-yellow"><strong>nueva columna</strong></span> que nos guarde el año y otra que guarde el valor de la variable de interés en cada uno de esos años. Y lo haremos con la función <code>pivot_longer()</code>: <span class="hl-yellow"><strong>pivotaremos la tabla</strong></span> a formato long:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb219-2"><a href="#cb219-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div>
</section>
<section id="pivotar-pivot_longer-1" class="slide level2">
<h2>Pivotar: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb221-2"><a href="#cb221-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>),</span>
<span id="cb221-3"><a href="#cb221-3"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb221-4"><a href="#cb221-4"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/table4a.jpg"></p>
</div>
</div>
<p>&nbsp;</p>
<ul>
<li><code>cols</code>: <span class="hl-yellow"><strong>nombre de las variables a pivotar</strong></span></li>
<li><code>names_to</code>: nombre de la nueva variable a la quemandamos la <span class="hl-yellow"><strong>cabecera</strong></span> de la tabla (los nombres).</li>
<li><code>values_to</code>: nombre de la nueva variable a la que vamos a mandar los <span class="hl-yellow"><strong>datos</strong></span>.</li>
</ul>
</section>
<section id="datos-sucios-messy-data-1" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table2</code></p>
<p>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;           &lt;int&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="pivotar-pivot_wider" class="slide level2">
<h2>Pivotar: pivot_wider()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
   country      year type            count
   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;           &lt;int&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>❎ Cada <span class="hl-red"><strong>observación está dividido en dos filas</strong></span> → los <span class="hl-yellow"><strong>registros con el mismo año deberían ser el mismo</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos será lo opuesto: con <code>pivot_wider()</code> <span class="hl-yellow"><strong>ensancharemos la tabla</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1"></a>table2 <span class="sc">|&gt;</span>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases population
  &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-2" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos otro ejemplo con la tabla <code>table3</code></p>
<p>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
* &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="separar-separate" class="slide level2">
<h2>Separar: separate()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country      year rate             
* &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>❎ Cada <span class="hl-red"><strong>celda contiene varios valores</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Lo que haremos será hacer uso de la función <code>separate()</code> para mandar <span class="hl-yellow"><strong>separar cada valor</strong></span> a una columna diferente.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="separar-separate-1" class="slide level2">
<h2>Separar: separate()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>Fíjate que los datos, aunque los ha separado, <span class="hl-red"><strong>los ha mantenido como texto</strong></span> cuando en realidad deberían ser variables numéricas. Para ello podemos añadir el argumento opcional <code>convert = TRUE</code></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country      year  cases        pop
  &lt;chr&gt;       &lt;int&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="datos-sucios-messy-data-3" class="slide level2">
<h2>Datos SUCIOS: messy data</h2>
<p>Veamos el último ejemplo con la tabla <code>table5</code></p>
<p>&nbsp;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country     century year  rate             
* &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
<p>&nbsp;</p>
<p><span class="hl-red"><strong>¿Qué puede estar fallando?</strong></span></p>
</section>
<section id="unir-unite" class="slide level2">
<h2>Unir unite()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  country     century year  rate             
* &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>❎ Tenemos <span class="hl-red"><strong>mismos valores divididos en dos columnas</strong></span></p>
</div>
</div>
<div class="fragment">
<p>Usaremos <code>unite()</code> para <span class="hl-yellow"><strong>unir los valores</strong></span> de siglo y año en una misma columna</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1"></a>table5 <span class="sc">|&gt;</span> <span class="fu">unite</span>(<span class="at">col =</span> year_completo, century, year, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  country     year_completo rate             
  &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;            
1 Afghanistan 1999          745/19987071     
2 Afghanistan 2000          2666/20595360    
3 Brazil      1999          37737/172006362  
4 Brazil      2000          80488/174504898  
5 China       1999          212258/1272915272
6 China       2000          213766/1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-4" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-5-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-5-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<p>📝 Echa un vistazo a la tabla <code>table4b</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1"></a>table4b <span class="sc">|&gt;</span></span>
<span id="cb244-2"><a href="#cb244-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"1999"</span><span class="sc">:</span><span class="st">"2000"</span>, <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb244-3"><a href="#cb244-3"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-2">
<p>📝 Echa un vistazo a la tabla <code>relig_income</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1"></a>relig_income <span class="sc">|&gt;</span></span>
<span id="cb245-2"><a href="#cb245-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"&lt;$10k"</span><span class="sc">:</span><span class="st">"Don't know/refused"</span>,</span>
<span id="cb245-3"><a href="#cb245-3"></a>               <span class="at">names_to =</span> <span class="st">"income"</span>,</span>
<span id="cb245-4"><a href="#cb245-4"></a>               <span class="at">values_to =</span> <span class="st">"people"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-3">
<p>📝 Echa un vistazo a la tabla <code>billboard</code> del paquete <code>{tidyr}</code>. ¿Es tidydata? En caso negativo, ¿qué falla? ¿Cómo convertirla a tidy data en caso de que no lo sea ya?</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1"></a>billboard <span class="sc">|&gt;</span></span>
<span id="cb246-2"><a href="#cb246-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"wk1"</span><span class="sc">:</span><span class="st">"wk76"</span>,</span>
<span id="cb246-3"><a href="#cb246-3"></a>               <span class="at">names_to =</span> <span class="st">"week"</span>,</span>
<span id="cb246-4"><a href="#cb246-4"></a>               <span class="at">names_prefix =</span> <span class="st">"wk"</span>,</span>
<span id="cb246-5"><a href="#cb246-5"></a>               <span class="at">values_to =</span> <span class="st">"position"</span>,</span>
<span id="cb246-6"><a href="#cb246-6"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="introducción-a-tidyverse" class="title-slide slide level1 center">
<h1>Introducción a Tidyverse</h1>
<p><span style="color:#444442;"><strong>Con los datos limpicos, vamos a trabajarlos</strong></span></p>
</section>
<section id="preprocesamiento-dplyr" class="slide level2">
<h2>Preprocesamiento: dplyr</h2>
<p>Dentro de <code>{tidyverse}</code> usaremos el paquete <code>{dplyr}</code> para el <span class="hl-yellow"><strong>preprocesamiento y depuración</strong></span> de datos de datos.</p>
<div class="columns">
<div class="column" style="width:65%;">
<p><img data-src="img/dplyr.png"></p>
</div><div class="column" style="width:35%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb247-2"><a href="#cb247-2"></a>  <span class="fu">limpio</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-3"><a href="#cb247-3"></a>  <span class="fu">filtro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-4"><a href="#cb247-4"></a>  <span class="fu">selecciono</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-5"><a href="#cb247-5"></a>  <span class="fu">ordeno</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-6"><a href="#cb247-6"></a>  <span class="fu">modifico</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-7"><a href="#cb247-7"></a>  <span class="fu">renombro</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-8"><a href="#cb247-8"></a>  <span class="fu">agrupo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-9"><a href="#cb247-9"></a>  <span class="fu">cuento</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-10"><a href="#cb247-10"></a>  <span class="fu">resumo</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb247-11"><a href="#cb247-11"></a>  <span class="fu">pinto</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb248-2"><a href="#cb248-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb249-2"><a href="#cb249-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Una de las operaciones más comunes es <span class="hl-yellow"><strong>filtrar registros</strong></span> en base a alguna condición lógica: con <code>filter()</code> se seleccionarán solo individuos que cumplan ciertas condiciones.</p>
<div>
<ul>
<li class="fragment"><code>==</code>, <code>!=</code>: <span class="hl-purple"><strong>igual</strong></span> o <span class="hl-purple"><strong>distinto</strong></span> que</li>
<li class="fragment"><code>&gt;</code>, <code>&lt;</code>: <span class="hl-purple"><strong>mayor</strong></span> o <span class="hl-purple"><strong>menor</strong></span> que</li>
<li class="fragment"><code>&gt;=</code>, <code>&lt;=</code>: <span class="hl-purple"><strong>mayor o igual</strong></span> o <span class="hl-purple"><strong>menor o igual</strong></span> que</li>
<li class="fragment"><code>%in%</code>: valores <span class="hl-purple"><strong>pertenencen</strong></span> a un listado de opciones</li>
<li class="fragment"><code>between(variable, val1, val2)</code>: si los valores (normalmente continuos) <span class="hl-purple"><strong>caen dentro de un rango</strong></span> de valores</li>
</ul>
</div>
</section>
<section id="filtrar-filas-filter-1" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb250-2"><a href="#cb250-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb251-2"><a href="#cb251-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes de <span class="hl-purple"><strong>ojos marrones</strong></span>?</p>
</section></section>
<section>
<section id="r-starwars-filtereye_color-brown" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; filter(eye_color == "brown") #</code></h1>

</section>
<section id="filtrar-filas-filter-2" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb252-2"><a href="#cb252-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb253-2"><a href="#cb253-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>no tienen ojos marrones</strong></span>?</p>
</section></section>
<section>
<section id="r-starwars-filtereye_color-brown-1" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; filter(eye_color != "brown") #</code></h1>

</section>
<section id="filtrar-filas-filter-3" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb254-2"><a href="#cb254-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb255-2"><a href="#cb255-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan los ojos marrones o azules</strong></span>?</p>
</section></section>
<section>
<section id="r-starwars-filtereye_color-in-cblue-brown" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; filter(eye_color %in% c("blue", "brown")) #</code></h1>

</section>
<section id="filtrar-filas-filter-4" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb256-2"><a href="#cb256-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb257-2"><a href="#cb257-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>midan entre 120 y 160 cm</strong></span>?</p>
</section></section>
<section>
<section id="r-starwars-filterbetweenheight-120-160" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; filter(between(height, 120, 160)) #</code></h1>
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda que dentro de <code>filter()</code> debe ir siempre algo que devuelva un <span class="hl-green"><strong>vector de valores lógicos</strong></span>.</p>
</div>
</div>
</div>
</section>
<section id="filtrar-filas-filter-5" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb258-2"><a href="#cb258-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb259-2"><a href="#cb259-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos</strong></span>?</p>
</section></section>
<section>
<section id="r-starwars-filtereye_color-brown-species-human" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; #   filter(eye_color == "brown" &amp; species != "Human") #</code></h1>

</section>
<section id="filtrar-filas-filter-6" class="slide level2">
<h2>Filtrar filas: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb260-2"><a href="#cb260-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb261-2"><a href="#cb261-2"></a>  <span class="fu">filter</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Cómo harías… <span class="hl-yellow"><strong>filtrar</strong></span> los personajes que <span class="hl-purple"><strong>tengan ojos y no sean humanos, o que tengan más de 60 años</strong></span>?</p>
</section></section>
<section>
<section id="r-starwars-filtereye_color-brown-species-human-birth_year-60" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; #   filter((eye_color == "brown" &amp; species != "Human") | birth_year &gt; 60) #</code></h1>

</section>
<section id="eliminar-ausentes-drop_na" class="slide level2">
<h2>Eliminar ausentes: drop_na()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb262"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb262-2"><a href="#cb262-2"></a>  <span class="fu">retirar_ausentes</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb263-2"><a href="#cb263-2"></a>  <span class="fu">drop_na</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hay un filtro especial que es el de <span class="hl-yellow"><strong>retirar los ausentes</strong></span>, para lo cual podemos usar <code>filter(is.na(variable))</code> o directamente <code>drop_na()</code>: si no indicamos variable, elimina registros con ausente en cualquiera de las variables.</p>
<div class="fragment">
<p>&nbsp;</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb264"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>(mass, height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  name                mass height hair_color 
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;      
1 Luke Skywalker        77    172 blond      
2 C-3PO                 75    167 &lt;NA&gt;       
3 R2-D2                 32     96 &lt;NA&gt;       
4 Darth Vader          136    202 none       
5 Leia Organa           49    150 brown      
6 Owen Lars            120    178 brown, grey
7 Beru Whitesun lars    75    165 brown      </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb266"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  name              mass height hair_color   
  &lt;chr&gt;            &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;        
1 Luke Skywalker      77    172 blond        
2 Obi-Wan Kenobi      77    182 auburn, white
3 Anakin Skywalker    84    188 blond        
4 Chewbacca          112    228 brown        
5 Wedge Antilles      77    170 brown        
6 Darth Maul          80    175 none         </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-5" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-6-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-6-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-6-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-6-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<p>📝 Selecciona del conjunto de starwars solo los personajes que sean androides o cuyo valor en <code>species</code> sea desconocido</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb268"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb268-2"><a href="#cb268-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Droid"</span> <span class="sc">|</span> <span class="fu">is.na</span>(species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-2">
<p>📝 Selecciona del conjunto de starwars solo los personajes cuyo peso esté entre 65 y 90 kg.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">between</span>(mass, <span class="dv">65</span>, <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-3">
<p>📝 Tras limpiar de ausentes en todas las variables, selecciona del conjunto de starwars solo los personajes que sean humanos y que vengan de Tatooine</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb270-2"><a href="#cb270-2"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb270-3"><a href="#cb270-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-4">
<p>📝 Selecciona del conjunto original de starwars los personajes no humanos, <code>male</code> en el sexo y que midan entre 120 y 170 cm, o los personajes con ojos marrones o rojos.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb271-2"><a href="#cb271-2"></a>  <span class="fu">filter</span>((species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span></span>
<span id="cb271-3"><a href="#cb271-3"></a>            <span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">170</span>)) <span class="sc">|</span></span>
<span id="cb271-4"><a href="#cb271-4"></a>           eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"brown"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-5">
<p>📝 Busca información en la ayuda de la función <code>str_detect()</code> del paquete <code>{stringr}</code> (cargado en <code>{tidyverse}</code>). Consejo: prueba antes las funciones que vayas a usar con algún vector de prueba para poder comprobar su funcionamiento. Tras saber lo que hace, filtra solo aquellos personajes con apellido <code>Skywalker</code></p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">"Skywalker"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Normalmente filtraremos condición pero a veces nos puede interesar <span class="hl-yellow"><strong>filtrar por posición</strong></span>: con <code>slice(posiciones)</code> podremos seleccionar filas concreetas pasando como argumento un <span class="hl-yellow"><strong>vector de índices</strong></span></p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  name               height  mass hair_color
  &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Beru Whitesun lars    165    75 brown     
2 R5-D4                  97    32 &lt;NA&gt;      
3 Biggs Darklighter     183    84 black     </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 8
  name           height  mass hair_color   skin_color eye_color birth_year sex  
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO             167    75 &lt;NA&gt;         gold       yellow           112 none 
2 Beru Whitesun…    165    75 brown        light      blue              47 fema…
3 Obi-Wan Kenobi    182    77 auburn, whi… fair       blue-gray         57 male 
4 Qui-Gon Jinn      193    89 brown        fair       blue              92 male </code></pre>
</div>
</div>
</div>
</section>
<section id="rebanadas-de-datos-slice-1" class="slide level2">
<h2>Rebanadas de datos: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Disponemos de opciones por defecto: con <code>slice_head(n = ...)</code> y <code>slice_tail(n = ...)</code> podemos obtener la <span class="hl-yellow"><strong>cabecera y cola</strong></span> de la tabla</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     
2 C-3PO             167    75 &lt;NA&gt;      </code></pre>
</div>
</div>
</div><div class="column" style="width:&quot;50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb285"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb285-1"><a href="#cb285-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Captain Phasma     NA    NA unknown   
2 Padmé Amidala     165    45 brown     </code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>Con <code>slice_max()</code> y <code>slice_min()</code> obtenemos la <span class="hl-yellow"><strong>filas con menor/mayor valor de una variable</strong></span> (si empate, todas salvo que <code>with_ties = FALSE</code>).</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(mass, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name          height  mass hair_color
  &lt;chr&gt;          &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Ratts Tyerell     79    15 none      
2 Yoda              66    17 white     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  name        height  mass hair_color
  &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Yarael Poof    264    NA none      
2 Tarfful        234   136 brown     </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="reordenar-filas-arrange" class="slide level2">
<h2>Reordenar filas: arrange()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">ordenar</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>También podemos <span class="hl-yellow"><strong>ordenar filas</strong></span> en función de alguna variable con <code>arrange()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 6
  name                  height  mass hair_color skin_color  eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Ratts Tyerell             79    15 none       grey, blue  unknown  
2 Yoda                      66    17 white      green       brown    
3 Wicket Systri Warrick     88    20 brown      brown       brown    
4 R2-D2                     96    32 &lt;NA&gt;       white, blue red      
5 R5-D4                     97    32 &lt;NA&gt;       white, red  red      </code></pre>
</div>
</div>
<div class="fragment">
<p>Por <span class="hl-yellow"><strong>defecto de menor a mayor</strong></span> pero podemos <span class="hl-purple"><strong>invertir el orden</strong></span> con <code>desc()</code></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name         height  mass
  &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
1 Yarael Poof     264    NA
2 Tarfful         234   136
3 Lama Su         229    88
4 Chewbacca       228   112
5 Roos Tarpals    224    82</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass, <span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  name                  height  mass
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Ratts Tyerell             79    15
2 Yoda                      66    17
3 Wicket Systri Warrick     88    20
4 R5-D4                     97    32
5 R2-D2                     96    32</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="eliminar-duplicados-distinct" class="slide level2">
<h2>Eliminar duplicados: distinct()</h2>
<p>Muchas veces necesitaremos asegurarnos que no hay duplicados en alguna variable (DNI) y podemos <span class="hl-yellow"><strong>eliminar filas duplicadas</strong></span> con <code>distinct()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  sex           
  &lt;chr&gt;         
1 male          
2 none          
3 female        
4 hermaphroditic
5 &lt;NA&gt;          </code></pre>
</div>
</div>
<div class="fragment">
<p>Para mantener todas las columnas de la tabla usaremos <code>.keep_all = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 14
  name     height  mass hair_color skin_color eye_color birth_year sex    gender
  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
1 Luke Sk…    172    77 blond      fair       blue              19 male   mascu…
2 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none   mascu…
3 Leia Or…    150    49 brown      light      brown             19 female femin…
# … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="añadir-filas-bind_rows" class="slide level2">
<h2>Añadir filas: bind_rows()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">encuadernar_filas</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último, podemos <span class="hl-yellow"><strong>concatenar nuevas filas</strong></span> con <code>bind_rows()</code> con <span class="hl-red"><strong>las nuevas observaciones en tabla</strong></span> (si no cuadran columnas rellena con ausentes)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb305-2"><a href="#cb305-2"></a>  <span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>), <span class="st">"edad"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">50</span>))</span>
<span id="cb305-3"><a href="#cb305-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  nombre  edad
  &lt;chr&gt;  &lt;dbl&gt;
1 javi      33
2 laura     50</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="st">"nombre"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"carlos"</span>, <span class="cn">NA</span>), <span class="st">"cp"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">28045</span>, <span class="dv">28019</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  nombre  edad    cp
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 javi      33    NA
2 laura     50    NA
3 carlos    NA 28045
4 &lt;NA&gt;      NA 28019</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-6" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-7-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-7-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-7-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-7-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-7-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-7-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<p>📝 Selecciona solo los personajes que sean humanos y de ojos marrones, para después ordernarlos en altura descendente y peso ascendente.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb309-2"><a href="#cb309-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">"Human"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb309-3"><a href="#cb309-3"></a>  <span class="fu">arrange</span>(height, <span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-2">
<p>📝 Extrae 3 registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-3">
<p>📝 Extrae el 10% de los registros aleatoriamente.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-4">
<p>📝 Extrae aleatoriamente 10 personajes pero de forma que la probabilidad de que salga cada uno sea proporcional a su peso (más pesados, más probable)</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb312-2"><a href="#cb312-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb312-3"><a href="#cb312-3"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">weight_by =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-5">
<p>📝 Selecciona los 3 personajes más mayores.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(birth_year, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-6">
<p>📝 Para saber que valores únicos hay en el color de pelo, elimina duplicados de la variable <code>hair_color</code>, eliminando antes los ausentes de dicha variable.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb314-2"><a href="#cb314-2"></a>  <span class="fu">drop_na</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb314-3"><a href="#cb314-3"></a>  <span class="fu">distinct</span>(hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-7">
<p>📝 De los personajes que son humanos y miden más de 160 cm, elimina duplicados en color de ojos, elimina ausentes en peso, selecciona los 3 más altos, y orden de mayor a menor peso. Devuelve la tabla.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb315-2"><a href="#cb315-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">160</span>) <span class="sc">|&gt;</span> </span>
<span id="cb315-3"><a href="#cb315-3"></a>  <span class="fu">distinct</span>(eye_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb315-4"><a href="#cb315-4"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb315-5"><a href="#cb315-5"></a>  <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb315-6"><a href="#cb315-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La opción más sencilla para <span class="hl-yellow"><strong>seleccionar variables por nombre</strong></span> es <code>select()</code>, dando como argumentos los nombres de columnas sin comillas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1"></a>starwars <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 2
   name               hair_color   
   &lt;chr&gt;              &lt;chr&gt;        
 1 Luke Skywalker     blond        
 2 C-3PO              &lt;NA&gt;         
 3 R2-D2              &lt;NA&gt;         
 4 Darth Vader        none         
 5 Leia Organa        brown        
 6 Owen Lars          brown, grey  
 7 Beru Whitesun lars brown        
 8 R5-D4              &lt;NA&gt;         
 9 Biggs Darklighter  black        
10 Obi-Wan Kenobi     auburn, white
# … with 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-1" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>La función <code>select()</code> nos permite seleccionar varias variables a la vez <span class="hl-yellow"><strong>concatenando sus nombres como si fuesen índices</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>eye_color) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 6
  name           height  mass hair_color skin_color  eye_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Luke Skywalker    172    77 blond      fair        blue     
2 C-3PO             167    75 &lt;NA&gt;       gold        yellow   
3 R2-D2              96    32 &lt;NA&gt;       white, blue red      
4 Darth Vader       202   136 none       white       yellow   </code></pre>
</div>
</div>
<div class="fragment">
<p>Y podemos <span class="hl-yellow"><strong>deseleccionar columnas</strong></span> con <code>-</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1"></a>starwars <span class="sc">|&gt;</span>  <span class="fu">select</span>(<span class="sc">-</span>mass, <span class="sc">-</span>(eye_color<span class="sc">:</span>starships))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 4
  name           height hair_color skin_color 
  &lt;chr&gt;           &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      
1 Luke Skywalker    172 blond      fair       
2 C-3PO             167 &lt;NA&gt;       gold       
3 R2-D2              96 &lt;NA&gt;       white, blue
4 Darth Vader       202 none       white      </code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-2" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Tenemos además <span class="hl-yellow"><strong>palabras reservadas</strong></span>: <code>everything()</code> <span class="hl-purple"><strong>todas las variables</strong></span>…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(mass, homeworld, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 14
   mass homeworld name   height hair_color skin_color eye_color birth_year sex  
  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1    77 Tatooine  Luke …    172 blond      fair       blue            19   male 
2    75 Tatooine  C-3PO     167 &lt;NA&gt;       gold       yellow         112   none 
3    32 Naboo     R2-D2      96 &lt;NA&gt;       white, bl… red             33   none 
4   136 Tatooine  Darth…    202 none       white      yellow          41.9 male 
# … with 5 more variables: gender &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<p>…y <code>last_col()</code> para referirnos a <span class="hl-purple"><strong>la última columna</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(name<span class="sc">:</span>mass, homeworld, <span class="fu">last_col</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  name           height  mass homeworld starships
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     &lt;list&gt;   
1 Luke Skywalker    172    77 Tatooine  &lt;chr [2]&gt;
2 C-3PO             167    75 Tatooine  &lt;chr [0]&gt;
3 R2-D2              96    32 Naboo     &lt;chr [0]&gt;
4 Darth Vader       202   136 Tatooine  &lt;chr [1]&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-3" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Podemos jugar con <span class="hl-yellow"><strong>patrones</strong></span> en el nombre, aquellas que <span class="hl-purple"><strong>comiencen por un prefijo</strong></span> (<code>starts_with()</code>), <span class="hl-purple"><strong>terminen con un sufijo</strong></span> (<code>ends_with()</code>), <span class="hl-purple"><strong>contengan un texto</strong></span> (<code>contains()</code>) o cumplan una <span class="hl-purple"><strong>expresión regular</strong></span> (<code>matches()</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1"></a><span class="co"># variables cuyo nombre acaba en "color" y contengan sexo o género</span></span>
<span id="cb334-2"><a href="#cb334-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"color"</span>), <span class="fu">matches</span>(<span class="st">"sex|gender"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 5
   hair_color    skin_color  eye_color sex    gender   
   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;    
 1 blond         fair        blue      male   masculine
 2 &lt;NA&gt;          gold        yellow    none   masculine
 3 &lt;NA&gt;          white, blue red       none   masculine
 4 none          white       yellow    male   masculine
 5 brown         light       brown     female feminine 
 6 brown, grey   light       blue      male   masculine
 7 brown         light       blue      female feminine 
 8 &lt;NA&gt;          white, red  red       none   masculine
 9 black         light       brown     male   masculine
10 auburn, white fair        blue-gray male   masculine
# … with 77 more rows</code></pre>
</div>
</div>
</section>
<section id="selección-columnas-select-4" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Incluso podemos <span class="hl-yellow"><strong>seleccionar por rango numérico</strong></span> si tenemos variables con un prefijo y números.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb338-2"><a href="#cb338-2"></a>  <span class="fu">tibble</span>(<span class="st">"semana1"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">115</span>, <span class="dv">141</span>, <span class="dv">232</span>), <span class="st">"semana2"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="cn">NA</span>, <span class="dv">17</span>),</span>
<span id="cb338-3"><a href="#cb338-3"></a>         <span class="st">"semana3"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">95</span>, <span class="dv">162</span>, <span class="cn">NA</span>), <span class="st">"semana4"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">19</span>, <span class="dv">15</span>),</span>
<span id="cb338-4"><a href="#cb338-4"></a>         <span class="st">"semana5"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">262</span>, <span class="dv">190</span>), <span class="st">"semana6"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">15</span>, <span class="dv">23</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Con <code>num_range()</code> podemos seleccionar con un prefijo y una secuencia numérica.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">num_range</span>(<span class="st">"semana"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  semana1 semana2 semana3 semana4
    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1     115       7      95      11
2     141      NA     162      19
3     232      17      NA      15</code></pre>
</div>
</div>
</div>
</section>
<section id="selección-columnas-select-5" class="slide level2">
<h2>Selección columnas: select()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">selecciono</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último, podemos seleccionar columnas por <span class="hl-yellow"><strong>tipo de dato</strong></span> haciendo uso de <code>where()</code> y dentro una función que devuelva un valor lógico de tipo de dato.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1"></a><span class="co"># Solo columnas numéricas o de texto</span></span>
<span id="cb343-2"><a href="#cb343-2"></a>starwars <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 11
   height  mass birth_year name    hair_color  skin_color eye_color sex   gender
    &lt;int&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; 
 1    172    77       19   Luke S… blond       fair       blue      male  mascu…
 2    167    75      112   C-3PO   &lt;NA&gt;        gold       yellow    none  mascu…
 3     96    32       33   R2-D2   &lt;NA&gt;        white, bl… red       none  mascu…
 4    202   136       41.9 Darth … none        white      yellow    male  mascu…
 5    150    49       19   Leia O… brown       light      brown     fema… femin…
 6    178   120       52   Owen L… brown, grey light      blue      male  mascu…
 7    165    75       47   Beru W… brown       light      blue      fema… femin…
 8     97    32       NA   R5-D4   &lt;NA&gt;        white, red red       none  mascu…
 9    183    84       24   Biggs … black       light      brown     male  mascu…
10    182    77       57   Obi-Wa… auburn, wh… fair       blue-gray male  mascu…
# … with 77 more rows, and 2 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="mover-columnas-relocate" class="slide level2">
<h2>Mover columnas: relocate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb345-2"><a href="#cb345-2"></a>  <span class="fu">recolocar</span>(var1, <span class="at">despues_de =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb346-2"><a href="#cb346-2"></a>  <span class="fu">relocate</span>(var1, <span class="at">.after =</span> var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Para facilitar la <span class="hl-yellow"><strong>recolocación de variables</strong></span> tenemos una función para ello, <code>relocate()</code>, indicándole en <code>.after</code> o <code>.before</code> <span class="hl-purple"><strong>detrás</strong></span> o <span class="hl-purple"><strong>delante</strong></span> de qué columnas queremos moverlas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">relocate</span>(species, <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   species name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 Human   Luke S…    172    77 blond      fair       blue            19   male 
 2 Droid   C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 Droid   R2-D2       96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 Human   Darth …    202   136 none       white      yellow          41.9 male 
 5 Human   Leia O…    150    49 brown      light      brown           19   fema…
 6 Human   Owen L…    178   120 brown, gr… light      blue            52   male 
 7 Human   Beru W…    165    75 brown      light      blue            47   fema…
 8 Droid   R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 Human   Biggs …    183    84 black      light      brown           24   male 
10 Human   Obi-Wa…    182    77 auburn, w… fair       blue-gray       57   male 
# … with 77 more rows, and 5 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="renombrar-rename" class="slide level2">
<h2>Renombrar: rename()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">renombrar</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nuevo =</span> antiguo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>A veces también podemos querer <span class="hl-yellow"><strong>modificar la «metainformación»</strong></span> de los datos, <span class="hl-yellow"><strong>renombrando columnas</strong></span>. Para ello usaremos de <code>rename()</code> poniendo <span class="hl-purple"><strong>primero el nombre nuevo</strong></span> y luego el <span class="hl-purple"><strong>antiguo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height, <span class="at">peso =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   nombre   altura  peso hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu…
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu…
 3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu…
 4 Darth V…    202   136 none       white      yellow          41.9 male  mascu…
 5 Leia Or…    150    49 brown      light      brown           19   fema… femin…
 6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu…
 7 Beru Wh…    165    75 brown      light      blue            47   fema… femin…
 8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu…
 9 Biggs D…    183    84 black      light      brown           24   male  mascu…
10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu…
# … with 77 more rows, and 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En muchas ocasiones querremos <span class="hl-yellow"><strong>modificar o crear variables</strong></span> con <code>mutate()</code>. Vamos a crear por ejemplo una nueva variable <code>height_m</code> con la altura en metros.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   name    height  mass hair_color  skin_color eye_color birth_year sex   gender
   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke S…    172    77 blond       fair       blue            19   male  mascu…
 2 C-3PO      167    75 &lt;NA&gt;        gold       yellow         112   none  mascu…
 3 R2-D2       96    32 &lt;NA&gt;        white, bl… red             33   none  mascu…
 4 Darth …    202   136 none        white      yellow          41.9 male  mascu…
 5 Leia O…    150    49 brown       light      brown           19   fema… femin…
 6 Owen L…    178   120 brown, grey light      blue            52   male  mascu…
 7 Beru W…    165    75 brown       light      blue            47   fema… femin…
 8 R5-D4       97    32 &lt;NA&gt;        white, red red             NA   none  mascu…
 9 Biggs …    183    84 black       light      brown           24   male  mascu…
10 Obi-Wa…    182    77 auburn, wh… fair       blue-gray       57   male  mascu…
# … with 77 more rows, and 6 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;,
#   films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;, height_m &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-1" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb358"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Además con los argumentos opcionales podemos <span class="hl-yellow"><strong>recolocar la columna modificada</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb359-2"><a href="#cb359-2"></a>  <span class="fu">mutate</span>(<span class="at">height_m =</span> height <span class="sc">/</span> <span class="dv">100</span>,</span>
<span id="cb359-3"><a href="#cb359-3"></a>         <span class="at">IMC =</span> mass <span class="sc">/</span> (height_m<span class="sc">^</span><span class="dv">2</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 16
   height_m   IMC name   height  mass hair_color skin_color eye_color birth_year
      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt;
 1     1.72  26.0 Luke …    172    77 blond      fair       blue            19  
 2     1.67  26.9 C-3PO     167    75 &lt;NA&gt;       gold       yellow         112  
 3     0.96  34.7 R2-D2      96    32 &lt;NA&gt;       white, bl… red             33  
 4     2.02  33.3 Darth…    202   136 none       white      yellow          41.9
 5     1.5   21.8 Leia …    150    49 brown      light      brown           19  
 6     1.78  37.9 Owen …    178   120 brown, gr… light      blue            52  
 7     1.65  27.5 Beru …    165    75 brown      light      blue            47  
 8     0.97  34.0 R5-D4      97    32 &lt;NA&gt;       white, red red             NA  
 9     1.83  25.1 Biggs…    183    84 black      light      brown           24  
10     1.82  23.2 Obi-W…    182    77 auburn, w… fair       blue-gray       57  
# … with 77 more rows, and 7 more variables: sex &lt;chr&gt;, gender &lt;chr&gt;,
#   homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;,
#   starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="modificar-columnas-mutate-2" class="slide level2">
<h2>Modificar columnas: mutate()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">modificar</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">nueva =</span> <span class="fu">funcion</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante…</strong></p>
</div>
<div class="callout-content">
<p>Cuando aplicamos <code>mutate()</code>, debemos de acordarnos que las <span class="hl-yellow"><strong>operaciones se realizan de manera vectorial</strong></span>, elemento a elemento, por lo que la función que usemos dentro debe devolver un vector de igual longitud. En caso contrario, <span class="hl-red"><strong>devolverá una constante</strong></span></p>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb363-2"><a href="#cb363-2"></a>  <span class="fu">mutate</span>(<span class="at">constante =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 15
   constante name  height  mass hair_color skin_color eye_color birth_year sex  
       &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1      97.3 Luke…    172    77 blond      fair       blue            19   male 
 2      97.3 C-3PO    167    75 &lt;NA&gt;       gold       yellow         112   none 
 3      97.3 R2-D2     96    32 &lt;NA&gt;       white, bl… red             33   none 
 4      97.3 Dart…    202   136 none       white      yellow          41.9 male 
 5      97.3 Leia…    150    49 brown      light      brown           19   fema…
 6      97.3 Owen…    178   120 brown, gr… light      blue            52   male 
 7      97.3 Beru…    165    75 brown      light      blue            47   fema…
 8      97.3 R5-D4     97    32 &lt;NA&gt;       white, red red             NA   none 
 9      97.3 Bigg…    183    84 black      light      brown           24   male 
10      97.3 Obi-…    182    77 auburn, w… fair       blue-gray       57   male 
# … with 77 more rows, and 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;,
#   species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="recategorizar-if_else" class="slide level2">
<h2>Recategorizar: if_else()</h2>
<p>También podemos combinar <code>mutate()</code> con la expresión de control <code>if_else()</code> para <span class="hl-yellow"><strong>recategorizar la variable</strong></span>: si <span class="hl-purple"><strong>se cumple una condición</strong></span>, hace una cosa, en caso contrario otra.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb365-2"><a href="#cb365-2"></a>  <span class="fu">mutate</span>(<span class="at">human =</span> <span class="fu">if_else</span>(species <span class="sc">==</span> <span class="st">"Human"</span>, <span class="st">"Human"</span>, <span class="st">"Not Human"</span>),</span>
<span id="cb365-3"><a href="#cb365-3"></a>         <span class="at">.after =</span> name) <span class="sc">|&gt;</span> </span>
<span id="cb365-4"><a href="#cb365-4"></a>  <span class="fu">select</span>(name<span class="sc">:</span>mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 4
   name               human     height  mass
   &lt;chr&gt;              &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt;
 1 Luke Skywalker     Human        172    77
 2 C-3PO              Not Human    167    75
 3 R2-D2              Not Human     96    32
 4 Darth Vader        Human        202   136
 5 Leia Organa        Human        150    49
 6 Owen Lars          Human        178   120
 7 Beru Whitesun lars Human        165    75
 8 R5-D4              Not Human     97    32
 9 Biggs Darklighter  Human        183    84
10 Obi-Wan Kenobi     Human        182    77
# … with 77 more rows</code></pre>
</div>
</div>
</section>
<section id="recategorizar-case_when" class="slide level2">
<h2>Recategorizar: case_when()</h2>
<p>Para <span class="hl-yellow"><strong>recategorizaciones más complejas</strong></span> tenemos <code>case_when()</code>, por ejemplo, para crear una categoría de los personajes en función de su altura.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb367"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb367-1"><a href="#cb367-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb367-2"><a href="#cb367-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb367-3"><a href="#cb367-3"></a>  <span class="fu">mutate</span>(<span class="at">altura =</span> <span class="fu">case_when</span>(height <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">~</span> <span class="st">"enanos"</span>,</span>
<span id="cb367-4"><a href="#cb367-4"></a>                            height <span class="sc">&lt;</span> <span class="dv">160</span> <span class="sc">~</span> <span class="st">"bajito"</span>,</span>
<span id="cb367-5"><a href="#cb367-5"></a>                            height <span class="sc">&lt;</span> <span class="dv">180</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb367-6"><a href="#cb367-6"></a>                            height <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> <span class="st">"alto"</span>,</span>
<span id="cb367-7"><a href="#cb367-7"></a>                            <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"gigante"</span>), <span class="at">.before =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 15
   altura  name    height  mass hair_color skin_color eye_color birth_year sex  
   &lt;chr&gt;   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
 1 normal  Luke S…    172    77 blond      fair       blue            19   male 
 2 normal  C-3PO      167    75 &lt;NA&gt;       gold       yellow         112   none 
 3 enanos  R2-D2       96    32 &lt;NA&gt;       white, bl… red             33   none 
 4 gigante Darth …    202   136 none       white      yellow          41.9 male 
 5 bajito  Leia O…    150    49 brown      light      brown           19   fema…
 6 normal  Owen L…    178   120 brown, gr… light      blue            52   male 
 7 normal  Beru W…    165    75 brown      light      blue            47   fema…
 8 enanos  R5-D4       97    32 &lt;NA&gt;       white, red red             NA   none 
 9 alto    Biggs …    183    84 black      light      brown           24   male 
10 alto    Obi-Wa…    182    77 auburn, w… fair       blue-gray       57   male 
# … with 71 more rows, and 6 more variables: gender &lt;chr&gt;, homeworld &lt;chr&gt;,
#   species &lt;chr&gt;, films &lt;list&gt;, vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="tu-turno-7" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-8-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-8-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-8-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-8-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li><li><a href="#tabset-8-6"><span class="hl-yellow"><strong>Ejercicio 6</strong></span></a></li><li><a href="#tabset-8-7"><span class="hl-yellow"><strong>Ejercicio 7</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<p>📝 Selecciona solo las variables nombre, altura y así como todas aquellas variables relacionadas con el color, a la vez que te quedas solo con aquellos que no tengan ausente en la altura.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb369"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb369-1"><a href="#cb369-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb369-2"><a href="#cb369-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb369-3"><a href="#cb369-3"></a>  <span class="fu">drop_na</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-2">
<p>📝 Con los datos obtenidos del ejercicio anterior, traduce el nombre de las columnas a castellano.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb370-2"><a href="#cb370-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb370-3"><a href="#cb370-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb370-4"><a href="#cb370-4"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height,</span>
<span id="cb370-5"><a href="#cb370-5"></a>         <span class="at">color_pelo =</span> eye_color, <span class="at">color_piel =</span> skin_color,</span>
<span id="cb370-6"><a href="#cb370-6"></a>         <span class="at">color_pelo =</span> hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-3">
<p>📝 Con los datos obtenidos del ejercicio anterior, coloca la variable de color de pelo justo detrás de la variable de nombres.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb371"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb371-1"><a href="#cb371-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb371-2"><a href="#cb371-2"></a>  <span class="fu">select</span>(name, height, <span class="fu">contains</span>(<span class="st">"color"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb371-3"><a href="#cb371-3"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb371-4"><a href="#cb371-4"></a>  <span class="fu">rename</span>(<span class="at">nombre =</span> name, <span class="at">altura =</span> height,</span>
<span id="cb371-5"><a href="#cb371-5"></a>         <span class="at">color_pelo =</span> eye_color, <span class="at">color_piel =</span> skin_color,</span>
<span id="cb371-6"><a href="#cb371-6"></a>         <span class="at">color_pelo =</span> hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb371-7"><a href="#cb371-7"></a>  <span class="fu">relocate</span>(color_pelo, <span class="at">.after =</span> nombre)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-4">
<p>📝 Con los datos originales, comprueba cuántas modalidades únicas hay en la variable de color de pelo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb372-2"><a href="#cb372-2"></a>  <span class="fu">distinct</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb372-3"><a href="#cb372-3"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-5">
<p>📝 Del dataset original, selecciona solo las variables numéricas y de tipo texto. Tras ello define una nueva variable llamada <code>under_18</code> que nos recategorice la variable de edad: <code>TRUE</code> si es menor de edad y <code>FALSE</code> en caso contrario</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb373-2"><a href="#cb373-2"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric) <span class="sc">|</span> <span class="fu">where</span>(is.character)) <span class="sc">|&gt;</span> </span>
<span id="cb373-3"><a href="#cb373-3"></a>  <span class="fu">mutate</span>(<span class="at">under_18 =</span> birth_year <span class="sc">&lt;</span> <span class="dv">18</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-6">
<p>📝 Del dataset original, crea una nueva columna llamada <code>auburn</code> (cobrizo/caoba) que nos diga TRUE si el color de pelo contiene dicha palabra y FALSE en caso contrario (reminder <code>str_detect()</code>).</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb374-2"><a href="#cb374-2"></a>  <span class="fu">mutate</span>(<span class="at">auburn =</span> <span class="fu">str_detect</span>(hair_color, <span class="st">"auburn"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-7">
<p>📝 Del dataset original, incluye una columna que calcule el IMC. Tras ello, crea una nueva variable que valga <code>NA</code> si no es humano, <code>delgadez</code> por debajo de 18, <code>normal</code> entre 18 y 30, <code>sobrepeso</code> por encima de 30.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb375"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb375-1"><a href="#cb375-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb375-2"><a href="#cb375-2"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>),</span>
<span id="cb375-3"><a href="#cb375-3"></a>         <span class="at">IMC_recat =</span> <span class="fu">case_when</span>(species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">~</span> <span class="cn">NA</span>,</span>
<span id="cb375-4"><a href="#cb375-4"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="st">"delgadez"</span>,</span>
<span id="cb375-5"><a href="#cb375-5"></a>                               IMC <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> <span class="st">"normal"</span>,</span>
<span id="cb375-6"><a href="#cb375-6"></a>                               <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"sobrepeso"</span>),</span>
<span id="cb375-7"><a href="#cb375-7"></a>         <span class="at">.after =</span> name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="contar-count" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb377"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb377-1"><a href="#cb377-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Hasta ahora solo hemos transformado o consultado los datos pero no hemos generado estadísticas. Empecemos por lo sencillo: <span class="hl-yellow"><strong>¿cómo contar (frecuencias)?</strong></span></p>
<div class="fragment">
<p>Cuando lo usamos en solitario <code>count()</code> nos devolverá simplemente el número de registros , pero cuando lo usamos con variables <code>count()</code> calcula lo que se conoce como <span class="hl-yellow"><strong>frecuencias</strong></span>: <span class="hl-purple"><strong>número de elementos de cada modalidad</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</div>
</section>
<section id="contar-count-1" class="slide level2">
<h2>Contar: count()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">contar</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb381"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb381-1"><a href="#cb381-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(var1, var2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Además si pasamos varias variables nos calcula lo que se conoce como una <span class="hl-yellow"><strong>tabla de contigencia</strong></span>. Con <code>sort = TRUE</code> nos devolverá el <span class="hl-purple"><strong>conteo ordenado</strong></span> (más frecuentes primero).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(sex, gender, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  sex            gender        n
  &lt;chr&gt;          &lt;chr&gt;     &lt;int&gt;
1 male           masculine    60
2 female         feminine     16
3 none           masculine     5
4 &lt;NA&gt;           &lt;NA&gt;          4
5 hermaphroditic masculine     1
6 none           feminine      1</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb384-2"><a href="#cb384-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb384-3"><a href="#cb384-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb384-4"><a href="#cb384-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb385-2"><a href="#cb385-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb385-3"><a href="#cb385-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb385-4"><a href="#cb385-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Una de las <span class="hl-yellow"><strong>funciones más potentes</strong></span> a combinar con las acciones vistas es <code>group_by()</code>, que nos permitirá <span class="hl-yellow"><strong>agrupar nuestros registros</strong></span> previamente</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb386-2"><a href="#cb386-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span></span>
<span id="cb386-3"><a href="#cb386-3"></a>  <span class="fu">count</span>() <span class="sc">|&gt;</span></span>
<span id="cb386-4"><a href="#cb386-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  sex                n
  &lt;chr&gt;          &lt;int&gt;
1 female            16
2 hermaphroditic     1
3 male              60
4 none               6
5 &lt;NA&gt;               4</code></pre>
</div>
</div>
</section>
<section id="agrupar-group_by-1" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb388-2"><a href="#cb388-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb388-3"><a href="#cb388-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb388-4"><a href="#cb388-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb389"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb389-2"><a href="#cb389-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb389-3"><a href="#cb389-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb389-4"><a href="#cb389-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Cuando apliquemos <code>group_by()</code> es importante entender que <span class="hl-yellow"><strong>NO MODIFICA los datos</strong></span>, sino que nos crea una <span class="hl-yellow"><strong>variable de grupo</strong></span> (subtablas por cada grupo) que modificará las acciones futuras: las <span class="hl-purple"><strong>operaciones se aplicarán a cada subtabla por separado</strong></span></p>
<div class="fragment">
<p>Por ejemplo, imaginemos que queremos extraer el personaje más alto con <code>slice_max()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 14
  name     height  mass hair_color skin_color eye_color birth_year sex   gender 
  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  
1 Yarael …    264    NA none       white      yellow            NA male  mascul…
# … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-2" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb392-2"><a href="#cb392-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb392-3"><a href="#cb392-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb392-4"><a href="#cb392-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb393"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb393-2"><a href="#cb393-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb393-3"><a href="#cb393-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb393-4"><a href="#cb393-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>¿Y si queremos <span class="hl-yellow"><strong>extraer el personaje más alto pero…de cada uno de los sexos</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb394-2"><a href="#cb394-2"></a>  <span class="fu">group_by</span>(sex) <span class="sc">|&gt;</span> </span>
<span id="cb394-3"><a href="#cb394-3"></a>  <span class="fu">slice_max</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb394-4"><a href="#cb394-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 14
  name    height  mass hair_color skin_color  eye_color birth_year sex    gender
  &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
1 Taun We    213    NA none       grey        black             NA female femin…
2 Jabba …    175  1358 &lt;NA&gt;       green-tan,… orange           600 herma… mascu…
3 Yarael…    264    NA none       white       yellow            NA male   mascu…
4 IG-88      200   140 none       metal       red               15 none   mascu…
5 Ric Ol…    183    NA brown      fair        blue              NA &lt;NA&gt;   &lt;NA&gt;  
6 Quarsh…    183    NA black      dark        brown             62 &lt;NA&gt;   &lt;NA&gt;  
# … with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="agrupar-group_by-3" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb396-2"><a href="#cb396-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb396-3"><a href="#cb396-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb396-4"><a href="#cb396-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb397"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb397-2"><a href="#cb397-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb397-3"><a href="#cb397-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span> </span>
<span id="cb397-4"><a href="#cb397-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_1.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidydatatutor_2.jpg"></p>
</div>
</div>
<p>La web <a href="https://tidydatatutor.com/" class="uri">https://tidydatatutor.com/</a> permite visualizar las operaciones de <code>{tidyverse}</code> (con el pipe antiguo)</p>
</section>
<section id="agrupar-group_by-4" class="slide level2">
<h2>Agrupar: group_by()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb398-2"><a href="#cb398-2"></a>  <span class="fu">agrupar</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb398-3"><a href="#cb398-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb398-4"><a href="#cb398-4"></a>  <span class="fu">desagrupar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb399-2"><a href="#cb399-2"></a>  <span class="fu">group_by</span>(var1, var2) <span class="sc">|&gt;</span> </span>
<span id="cb399-3"><a href="#cb399-3"></a>  <span class="fu">accion</span>() <span class="sc">|&gt;</span></span>
<span id="cb399-4"><a href="#cb399-4"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Recuerda siempre <span class="hl-red"><strong>hacer ungroup</strong></span> para eliminar la variable de grupo creada</p>
</div>
</div>
</div>
<div class="fragment">
<p>En la nueva versión de <code>{dplyr}</code> ahora se <span class="hl-yellow"><strong>permite incluir la variable de grupo</strong></span> en la llamada a muchas funciones con el argumento <code>by = ...</code> o <code>.by = ...</code></p>
</div>
</section></section>
<section id="r-eval-false-starwars-slice_maxheight-by-sex" class="title-slide slide level1 center">
<h1><code>{r} # #| eval: false # starwars |&gt; slice_max(height, by = sex) #</code></h1>

</section>

<section id="section" class="title-slide slide level1 center">
<h1></h1>

</section>

<section>
<section id="r-echo-false-starwars-slice_maxheight-by-sex-selectnameeye_color" class="title-slide slide level1 center">
<h1><code>{r} # #| echo: false # starwars |&gt; slice_max(height, by = sex) |&gt; select(name:eye_color) #</code></h1>

</section>
<section id="fila-a-fila-rowwise" class="slide level2">
<h2>Fila-a-fila: rowwise()</h2>
<p>Una opción muy útil usada antes de una operación también es <code>rowwise()</code>: toda <span class="hl-yellow"><strong>operación que venga después se aplicará en cada fila por separado</strong></span>. Por ejemplo, vamos a definir un conjunto dummy de notas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb400"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb400-1"><a href="#cb400-1"></a>notas <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"mates"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">7.5</span>, <span class="dv">8</span>, <span class="fl">9.1</span>, <span class="dv">3</span>),</span>
<span id="cb400-2"><a href="#cb400-2"></a>                <span class="st">"lengua"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">6</span>, <span class="fl">6.5</span>, <span class="fl">9.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Si aplicamos la media directamente el valor será idéntico ya que nos ha hecho la media global, pero nos gustaría sacar una <span class="hl-yellow"><strong>media por registro</strong></span>. Para eso usaremos <code>rowwise()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1"></a>notas <span class="sc">|&gt;</span> </span>
<span id="cb401-2"><a href="#cb401-2"></a>  <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb401-3"><a href="#cb401-3"></a>  <span class="fu">mutate</span>(<span class="at">media_curso =</span> <span class="fu">mean</span>(<span class="fu">c</span>(mates, lengua)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
# Rowwise: 
  mates lengua media_curso
  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
1   7.5    8          7.75
2   8      6          7   
3   9.1    6.5        7.8 
4   3      9.2        6.1 </code></pre>
</div>
</div>
</div>
</section>
<section id="resumir-summarise" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Por último tenemos <code>summarise()</code>, que nos permitirá sacar resúmenes estadísticos. Por ejemplo, vamos a <span class="hl-yellow"><strong>calcular la media de las alturas</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb405-2"><a href="#cb405-2"></a>  <span class="fu">drop_na</span>(height) <span class="sc">|&gt;</span> </span>
<span id="cb405-3"><a href="#cb405-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  media_altura
         &lt;dbl&gt;
1         174.</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Cuidado</strong></p>
</div>
<div class="callout-content">
<p>Fíjate que <code>mutate()</code> devuelve <span class="hl-yellow"><strong>tantas filas como registros originales</strong></span>, mientras que con <code>summarise()</code> calcula un <span class="hl-purple"><strong>nuevo dataset de resumen</strong></span>, solo incluyendo aquello que esté indicado.</p>
</div>
</div>
</div>
</div>
</section>
<section id="resumir-summarise-1" class="slide level2">
<h2>Resumir: summarise()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Si además esto lo <span class="hl-yellow"><strong>combinamos con la agrupación</strong></span> de <code>group_by()</code> o <code>.by = ...</code>, en pocas líneas de código puedes obtener <span class="hl-purple"><strong>estadísticas desagreagadas</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb409-2"><a href="#cb409-2"></a>  <span class="fu">drop_na</span>(sex, height, mass) <span class="sc">|&gt;</span> </span>
<span id="cb409-3"><a href="#cb409-3"></a>  <span class="fu">summarise</span>(<span class="at">media_altura =</span> <span class="fu">mean</span>(height),</span>
<span id="cb409-4"><a href="#cb409-4"></a>            <span class="at">media_peso =</span> <span class="fu">mean</span>(mass),</span>
<span id="cb409-5"><a href="#cb409-5"></a>            <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 58 × 3
   media_altura media_peso .by   
          &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt; 
 1         174.       98.2 male  
 2         174.       98.2 none  
 3         174.       98.2 none  
 4         174.       98.2 male  
 5         174.       98.2 female
 6         174.       98.2 male  
 7         174.       98.2 female
 8         174.       98.2 none  
 9         174.       98.2 male  
10         174.       98.2 male  
# … with 48 more rows</code></pre>
</div>
</div>
</section>
<section id="resumir-reframe" class="slide level2">
<h2>Resumir: reframe()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb411"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">resumir</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">reframe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>En el nuevo <code>{dplyr}</code> han incluido <code>reframe()</code> para evitar problemas de <code>summarise()</code> cuando <span class="hl-yellow"><strong>devolvemos más de un valor por variable</strong></span>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb413"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb413-2"><a href="#cb413-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span></span>
<span id="cb413-3"><a href="#cb413-3"></a>  <span class="fu">summarise</span>(<span class="fu">quantile</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 1
  `quantile(mass)`
             &lt;dbl&gt;
1             15  
2             55.6
3             79  
4             84.5
5           1358  </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<section id="r-starwars-drop_namass-reframequantilemass" class="title-slide slide level1 center">
<h1><code>{r} # starwars |&gt; #   drop_na(mass) |&gt; #   reframe(quantile(mass)) #</code></h1>

</section>

</div>
</div>
</section>
<section id="selectores-across" class="slide level2">
<h2>Selectores: across()</h2>
<p>Un truco es <span class="hl-yellow"><strong>hacer uso de selectores</strong></span> <code>across()</code> y <code>where()</code>. El primero nos permite <span class="hl-purple"><strong>actuar sobre varias columnas por nombre</strong></span> (con <code>mutate()</code> o <code>summarise()</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb415"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="at">medias =</span> <span class="fu">across</span>(height<span class="sc">:</span>mass, mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 2
   medias$height $mass .by   
           &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; 
 1          174.  97.3 male  
 2          174.  97.3 none  
 3          174.  97.3 none  
 4          174.  97.3 male  
 5          174.  97.3 female
 6          174.  97.3 male  
 7          174.  97.3 female
 8          174.  97.3 none  
 9          174.  97.3 male  
10          174.  97.3 male  
# … with 77 more rows</code></pre>
</div>
</div>
<div class="fragment">
<p>El segundo, <code>where()</code>, nos permite hacer lo mismo pero <span class="hl-yellow"><strong>seleccionando por tipo</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb417"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb417-2"><a href="#cb417-2"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.by =</span> <span class="fu">c</span>(sex, gender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 174 × 4
   height  mass birth_year .by   
    &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt; 
 1   174.  97.3       87.6 male  
 2   174.  97.3       87.6 none  
 3   174.  97.3       87.6 none  
 4   174.  97.3       87.6 male  
 5   174.  97.3       87.6 female
 6   174.  97.3       87.6 male  
 7   174.  97.3       87.6 female
 8   174.  97.3       87.6 none  
 9   174.  97.3       87.6 male  
10   174.  97.3       87.6 male  
# … with 164 more rows</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-8" class="slide level2">
<h2>💻 Tu turno</h2>
<p><span style="color:#444442;"><strong>Intenta realizar los siguientes ejercicios sin mirar las soluciones</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1"><span class="hl-yellow"><strong>Ejercicio 1</strong></span></a></li><li><a href="#tabset-9-2"><span class="hl-yellow"><strong>Ejercicio 2</strong></span></a></li><li><a href="#tabset-9-3"><span class="hl-yellow"><strong>Ejercicio 3</strong></span></a></li><li><a href="#tabset-9-4"><span class="hl-yellow"><strong>Ejercicio 4</strong></span></a></li><li><a href="#tabset-9-5"><span class="hl-yellow"><strong>Ejercicio 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<p>📝 Calcula cuántos personajes hay de cada especie, ordenados de más a menor frecuencia.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb419"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">count</span>(species, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-2">
<p>📝 Tras eliminar ausentes en las variables de peso y estatura, añade una nueva variable que nos calcule el IMC de cada personaje, y determina el IMC medio de nuestros personajes desagregada por sexo</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb420-2"><a href="#cb420-2"></a>  <span class="fu">drop_na</span>(mass, height) <span class="sc">|&gt;</span> </span>
<span id="cb420-3"><a href="#cb420-3"></a>  <span class="fu">mutate</span>(<span class="at">IMC =</span> mass <span class="sc">/</span> ((height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb420-4"><a href="#cb420-4"></a>  <span class="fu">summarise</span>(<span class="at">IMC_medio =</span> <span class="fu">mean</span>(IMC), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-3">
<p>📝 Obtén el personaje más joven por cada sexo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb421"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb421-2"><a href="#cb421-2"></a>  <span class="fu">slice_min</span>(birth_year, <span class="at">by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-4">
<p>📝 Obtén la edad del personaje más joven y más viejo de cada sexo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb422-2"><a href="#cb422-2"></a>  <span class="fu">drop_na</span>(birth_year) <span class="sc">|&gt;</span></span>
<span id="cb422-3"><a href="#cb422-3"></a>  <span class="fu">summarise</span>(<span class="fu">min</span>(birth_year), <span class="fu">max</span>(birth_year), <span class="at">.by =</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-5">
<p>📝 Determina la cantidad de personajes en cada década (echa un vistazo a <code>round()</code>, primero sin desagregar y luego desagregado por sexo.</p>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb423"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb423-1"><a href="#cb423-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb423-2"><a href="#cb423-2"></a>  <span class="fu">count</span>(<span class="at">birth_decade =</span> <span class="fu">round</span>(birth_year, <span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="caso-real-datos-de-encuestas" class="title-slide slide level1 center">
<h1>Caso real: datos de encuestas</h1>
<p><span style="color:#444442;"><strong>Pongamos en práctica lo aprendido…</strong></span></p>
</section>
<section id="caso-real-datos-de-encuestas-1" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<p>El paquete <code>{readr}</code> (ya en <code>{tidyverse}</code>) nos permite realizar una carga más ágil y más inteligente que el <code>read.csv()</code> de base (lo importa a un <code>tibble</code> e interpreta bien el tipo de cada variable, incluso fechas)</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1"></a>encuestas <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/historical_surveys.csv"</span>)</span>
<span id="cb424-2"><a href="#cb424-2"></a>encuestas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,753 × 59
   type_survey date_elec  id_pollster pollster media    field_date_from
   &lt;chr&gt;       &lt;date&gt;     &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;    &lt;date&gt;         
 1 national    1982-10-28 pollster-1  PSOE     &lt;NA&gt;     1982-10-28     
 2 national    1982-10-28 pollster-2  IDEAL    &lt;NA&gt;     1982-10-28     
 3 national    1982-10-28 pollster-3  SOFEMASA EL PAÍS  1982-10-16     
 4 national    1982-10-28 pollster-4  GRUPO 16 GRUPO 16 1982-10-09     
 5 national    1982-10-28 pollster-3  SOFEMASA EL PAÍS  1982-10-01     
 6 national    1982-10-28 pollster-4  GRUPO 16 GRUPO 16 1982-09-25     
 7 national    1982-10-28 pollster-3  SOFEMASA EL PAÍS  1982-09-24     
 8 national    1982-10-28 pollster-5  AP       &lt;NA&gt;     1982-09-27     
 9 national    1982-10-28 pollster-6  GALLUP   &lt;NA&gt;     1982-09-06     
10 national    1982-10-28 pollster-4  GRUPO 16 GRUPO 16 1982-09-05     
# … with 3,743 more rows, and 53 more variables: field_date_to &lt;date&gt;,
#   exit_poll &lt;lgl&gt;, size &lt;dbl&gt;, turnout &lt;dbl&gt;, UCD &lt;dbl&gt;, PSOE &lt;dbl&gt;,
#   PCE &lt;dbl&gt;, AP &lt;dbl&gt;, CIU &lt;dbl&gt;, PA &lt;dbl&gt;, EAJ-PNV &lt;dbl&gt;, HB &lt;dbl&gt;,
#   ERC &lt;dbl&gt;, EE &lt;dbl&gt;, CDS &lt;dbl&gt;, FN &lt;dbl&gt;, PAD &lt;dbl&gt;, PRD &lt;dbl&gt;, MUC &lt;dbl&gt;,
#   IU &lt;dbl&gt;, CG &lt;dbl&gt;, PAR &lt;dbl&gt;, AIC &lt;dbl&gt;, UV &lt;dbl&gt;, EA &lt;dbl&gt;, PP &lt;dbl&gt;,
#   LV &lt;dbl&gt;, ARM &lt;dbl&gt;, PDP &lt;dbl&gt;, CC &lt;dbl&gt;, PAP &lt;dbl&gt;, BNG &lt;dbl&gt;, ICV &lt;dbl&gt;,
#   EH &lt;dbl&gt;, UPYD &lt;dbl&gt;, AMAIUR &lt;dbl&gt;, CS &lt;dbl&gt;, DIL-CDC &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="caso-real-datos-de-encuestas-2" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<p>Lo <span class="hl-yellow"><strong>primero que debes hacer</strong></span> es visualizar con <code>View()</code> la tabla para entenderla</p>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Primera tarea</strong></span>: crea una variable llamada <code>id_survey</code> que nos permita identificar a cada encuesta. ¿Qué podríamos concatenar?</li>
</ul>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1"></a>encuestas <span class="ot">&lt;-</span></span>
<span id="cb426-2"><a href="#cb426-2"></a>  encuestas <span class="sc">|&gt;</span> </span>
<span id="cb426-3"><a href="#cb426-3"></a>  <span class="co"># Creamos un id con type_survey-date_elec-id_pollster</span></span>
<span id="cb426-4"><a href="#cb426-4"></a>  <span class="co"># con .before la ponemos delante de everything(), de todo (1ª col)</span></span>
<span id="cb426-5"><a href="#cb426-5"></a>  <span class="fu">mutate</span>(<span class="at">id_survey =</span> <span class="fu">glue</span>(<span class="st">"{type_survey}-{date_elec}-{id_pollster}"</span>),</span>
<span id="cb426-6"><a href="#cb426-6"></a>         <span class="at">.before =</span> <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="caso-real-datos-de-encuestas-3" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Segunda tarea</strong></span>: usando la variable <code>id_survey</code> creada elimina duplicados.</li>
</ul>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb427"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1"></a>encuestas <span class="ot">&lt;-</span></span>
<span id="cb427-2"><a href="#cb427-2"></a>  encuestas <span class="sc">|&gt;</span></span>
<span id="cb427-3"><a href="#cb427-3"></a>  <span class="co"># Eliminamos duplicados por id_survey, pero mantenemos todas las</span></span>
<span id="cb427-4"><a href="#cb427-4"></a>  <span class="co"># columnas con .keep_all = TRUE</span></span>
<span id="cb427-5"><a href="#cb427-5"></a>  <span class="fu">distinct</span>(id_survey, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-real-datos-de-encuestas-4" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Tercera tarea</strong></span>: tenemos una variable <code>media</code> que representa el medio en el que se publicó o encargo la encuesta. Elimina dicha variable, así como el tipo de encuesta y el id de la encuestadora</li>
</ul>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1"></a>encuestas <span class="ot">&lt;-</span></span>
<span id="cb428-2"><a href="#cb428-2"></a>  encuestas <span class="sc">|&gt;</span> </span>
<span id="cb428-3"><a href="#cb428-3"></a>  <span class="co"># Eliminamos las columnas pedidas con un -</span></span>
<span id="cb428-4"><a href="#cb428-4"></a>  <span class="co"># las concateno para usar solo un - para todas</span></span>
<span id="cb428-5"><a href="#cb428-5"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(type_survey, id_pollster, media))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-real-datos-de-encuestas-5" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Cuarta tarea</strong></span>: quédate solo con las encuestas cuyo tamaño muestral conozcamos y que no sean encuestas a pie de urna. Elimina esta última variable.</li>
</ul>
</section></section>
<section>
<section id="r-code-fold-true-encuestas---encuestas-eliminar-ausentes-drop_nasize-filtramos-encuestas-registros-a-pie-de-urna-aquellas-que-exit_poll-false-filterexit_poll-quitamos-la-variable-pie-de-urna-select-exit_poll" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas &lt;- #   encuestas |&gt;  #   # eliminar ausentes #   drop_na(size) |&gt;  #   # Filtramos encuestas (registros) a pie de urna (aquellas que exit_poll == FALSE) #   filter(!exit_poll) |&gt;  #   # Quitamos la variable pie de urna #   select(-exit_poll) #</code></h1>

</section>
<section id="caso-real-datos-de-encuestas-6" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Quinta tarea</strong></span>: convierte el dataset en tidydata. ¿Qué falla? ¿Cómo arreglarlo? Reminder: no quremos ausentes.</li>
</ul>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1"></a>encuestas <span class="ot">&lt;-</span></span>
<span id="cb429-2"><a href="#cb429-2"></a>  encuestas <span class="sc">|&gt;</span> </span>
<span id="cb429-3"><a href="#cb429-3"></a>  <span class="co"># Convertimos a tidydata</span></span>
<span id="cb429-4"><a href="#cb429-4"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>(id_survey<span class="sc">:</span>turnout),</span>
<span id="cb429-5"><a href="#cb429-5"></a>               <span class="at">names_to =</span> <span class="st">"partido"</span>,</span>
<span id="cb429-6"><a href="#cb429-6"></a>               <span class="at">values_to =</span> <span class="st">"est_voto"</span>,</span>
<span id="cb429-7"><a href="#cb429-7"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="caso-real-datos-de-encuestas-7" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Sexta tarea</strong></span>: calcula el número de días que la encuesta ha hecho trabajo de campo, y coloca dicha columna tras el nombre de la encuestadora. Tras ello elimina aquellas encuestas que tengan 0 días de trabajo de campo.</li>
</ul>
</section></section>
<section>
<section id="r-code-fold-true-encuestas---encuestas-calculamos-los-días-de-campo-como-la-diferencia-de-fechas-con-as.numeric-convertimos-la-dif.-de-fechas-a-un-número-mutaten_dias_campo-as.numericfield_date_to---field_date_from-.after-pollster-solo-aquellas-cuyo-trabajo-de-campo-haya-durado-1-día-o-más-filtern_dias_campo-0" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas &lt;- #   encuestas |&gt;  #   # Calculamos los días de campo como la diferencia de fechas  #   # con as.numeric() convertimos la dif. de fechas a un número #   mutate(n_dias_campo = as.numeric(field_date_to - field_date_from), #          .after = pollster) |&gt;  #   # Solo aquellas cuyo trabajo de campo haya durado 1 día o más #   filter(n_dias_campo &gt; 0) #</code></h1>

</section>
<section id="caso-real-datos-de-encuestas-8" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Séptima tarea</strong></span>: calcula el número de días que faltan hasta las elecciones desde que la encuesta cerro el trabajo de campo y coloca dicha variable tras <code>n_dias_campo</code>. Tras ello elimina las fechas de inicio y fin de trabajo de campo de la manera más eficiente posible</li>
</ul>
</section></section>
<section>
<section id="r-code-fold-true-encuestas---encuestas-calculamos-los-días-que-faltan-a-las-elecciones-con-as.numeric-convertimos-la-dif.-de-fechas-a-un-número-mutaten_dias_elec-as.numericdate_elec---field_date_to-.after-n_dias_campo-eliminamos-ya-las-fechas-de-campo-que-no-necesitamos-select-containsfield" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas &lt;- #   encuestas |&gt;  #   # Calculamos los días que faltan a las elecciones #   # con as.numeric() convertimos la dif. de fechas a un número #   mutate(n_dias_elec = as.numeric(date_elec - field_date_to), #          .after = n_dias_campo) |&gt;  #   # Eliminamos ya las fechas de campo que no necesitamos #   select(-contains("field")) #</code></h1>

</section>
<section id="caso-real-datos-de-encuestas-9" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Octava tarea</strong></span>: elimina encuestas que se hayan cerrado dentro de la ventana temporal en la que está prohibido la publicación de encuestas (no se deberían usar para predecir ya que «no se conocen»)</li>
</ul>
</section></section>
<section>
<section id="r-code-fold-true-encuestas---encuestas-solo-con-encuestas-antes-del-baneo-electoral-filtern_dias_elec-15" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas &lt;- #   encuestas |&gt; #   # Solo con encuestas antes del baneo electoral #   filter(n_dias_elec &gt; 15) #</code></h1>

</section>
<section id="caso-real-datos-de-encuestas-10" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Novena tarea</strong></span>: obtén, por cada elección, la media de las encuestas de cada partido</li>
</ul>
</section></section>
<section>
<section id="r-code-fold-true-encuestas-resumen-media-de-voto-por-fecha-y-partido-summarisemedia_voto-meanest_voto-.by-cdate_elec-partido" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas |&gt; #   # Resumen: media de voto por fecha y partido #   summarise(media_voto = mean(est_voto), #             .by = c("date_elec", "partido")) #</code></h1>

</section>
<section id="caso-real-datos-de-encuestas-11" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Décima tarea</strong></span>: realiza lo mismo que la tarea anterior pero solo para las encuestas de los 60 días previos a las elecciones. Ordena la salida de reciente a antiguo</li>
</ul>
</section></section>
<section>
<section id="r-code-fold-true-encuestas-filtramos-ventana-de-60-días-filtern_dias_elec-60-media-de-est_voto-por-fecha-y-partido-summarisemedia_voto-meanest_voto-.by-cdate_elec-partido-ordenar-de-mayor-a-menor-arrangedescdate_elec" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas |&gt; #   # Filtramos ventana de 60 días #   filter(n_dias_elec &lt;= 60) |&gt; #   # Media de est_voto por fecha y partido #   summarise(media_voto = mean(est_voto), #             .by = c("date_elec", "partido")) |&gt; #   # Ordenar de mayor a menor #   arrange(desc(date_elec)) #</code></h1>

</section>
<section id="caso-real-datos-de-encuestas-12" class="slide level2">
<h2>Caso real: datos de encuestas</h2>
<ul>
<li><span class="hl-purple"><strong>Undécima tarea</strong></span>: del dataset generado en el anterior ejercicio, obtén el primer y el segundo con mayor estimación de voto (en promedio)</li>
</ul>
</section></section>
<section id="r-code-fold-true-encuestas-filtramos-ventana-de-60-días-filtern_dias_elec-60-media-de-est_voto-por-fecha-y-partido-summarisemedia_voto-meanest_voto-.by-cdate_elec-partido-ordenar-de-mayor-a-menor-por-fecha-arrangedescdate_elec-extraemos-los-dos-con-más-est-de-voto-por-cada-fecha-slice_maxmedia_voto-n-2-by-date_elec" class="title-slide slide level1 center">
<h1><code>{r} # #| code-fold: true # encuestas |&gt;  #   # Filtramos ventana de 60 días #   filter(n_dias_elec &lt;= 60) |&gt;  #   # Media de est_voto por fecha y partido #   summarise(media_voto = mean(est_voto), #             .by = c("date_elec", "partido")) |&gt; #   # Ordenar de mayor a menor por fecha #   arrange(desc(date_elec)) |&gt; #   # extraemos los dos con más est de voto (por cada fecha) #   slice_max(media_voto, n = 2, by = date_elec) #</code></h1>

</section>

<section>
<section id="el-mundo-github" class="title-slide slide level1 center">
<h1>El mundo Github</h1>
<p><span style="color:#444442;"><strong>Trabajar ordenados, publicar resultados, replicabilidad de lo realizado</strong></span></p>
</section>
<section id="qué-es-github" class="slide level2">
<h2>¿Qué es Github?</h2>
<p><span class="hl-yellow"><strong>GitHub</strong></span> es la plataforma colaborativa más conocida basada en el <span class="hl-yellow"><strong>sistema de control de versiones Git</strong></span></p>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>¿Qué es Git?</strong></span> Git es un sistema de <span class="hl-yellow"><strong>control de versiones</strong></span>: una especie de <span class="hl-yellow"><strong>Dropbox</strong></span> para facilitar la <span class="hl-yellow"><strong>programación colaborativa</strong></span> entre un grupo de personas, permitiendo llevar la <span class="hl-yellow"><strong>trazabilidad de los cambios</strong></span> realizados.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>¿Qué es Github?</strong></span> Nuestra <span class="hl-yellow"><strong>plataforma/interfaz</strong></span> para ejecutar el control de versiones: nos servirá no solo para trabajar colaborativamente sino para <span class="hl-yellow"><strong>hacer transparente</strong></span> el proceso de construcción de nuestros proyectos de código.</li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Importante</strong></p>
</div>
<div class="callout-content">
<p>Desde el 4 de junio de 2018 Github es de Microsoft (ergo el código que subas también)</p>
</div>
</div>
</div>
</div>
</section>
<section id="visión-general" class="slide level2">
<h2>Visión general</h2>
<p>Tras hacernos una cuenta en Github, <span class="hl-purple"><strong>arriba a la derecha</strong></span> tendremos un círculo, y haciendo click en <span class="hl-purple"><strong>Your Profile</strong></span>, veremos algo similar a esto</p>
<div class="columns">
<div class="column" style="width:55%;">
<p><img data-src="img/github_1.png"></p>
</div><div class="column" style="width:45%;">
<ul>
<li><p><span class="hl-purple"><strong>Edit profile</strong></span>: nos permite añadir una <span class="hl-yellow"><strong>descripción y foto de perfil</strong></span>.</p></li>
<li><p><span class="hl-purple"><strong>Overview</strong></span>: en ese panel de cuadrados se <span class="hl-yellow"><strong>visualizará nuestra actividad</strong></span> a lo largo del tiempo.</p></li>
<li><p><span class="hl-purple"><strong>Repositories</strong></span>: el códugo será subido a <span class="hl-yellow"><strong>repositorios</strong></span>, el equivalente a nuestras carpetas compartidas en Dropbox.</p></li>
</ul>
</div>
</div>
</section>
<section id="primer-uso-consumidor" class="slide level2">
<h2>Primer uso: consumidor</h2>
<p>Antes de aprender como crear repositorios, Github también nos servirá para</p>
<ul>
<li><span class="hl-purple"><strong>Acceder a código</strong></span> ajeno</li>
<li><span class="hl-purple"><strong>Proponer mejoras</strong></span> a otros usuarios, e incluso proponer <span class="hl-yellow"><strong>correcciones de error que detectemos</strong></span> de software que usemos</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Instalar paquetes de R</strong></span>. En muchas ocasiones los desarrolladores de paquetes suben las actualizaciones a CRAN cada cierto tiempo, y en otras el software no es suficientemente «amplio» para poder ser subido como paquete.</li>
</ul>
<p>El código de paquetes que no tengamos subido en CRAN podremos <span class="hl-yellow"><strong>instalarlo como código desde Github</strong></span></p>
</div>
</section>
<section id="instalar-desde-github" class="slide level2">
<h2>Instalar desde Github</h2>
<p>Por ejemplo, vamos a instalar un paquete llamado <a href="https://github.com/jbgb13/peRReo"><code>{peRReo}</code></a>, cuya única función es darnos <span class="hl-yellow"><strong>paletas de colores</strong></span> basadas en portadas de <span class="hl-yellow"><strong>álbumes de música urbana</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/perrreo.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rosalia.png" width="360"></p>
</div>
</div>
<div class="fragment">
<p>Para ello antes tendremos que instalar un <span class="hl-yellow"><strong>conjunto de paquetes para desarrolladores</strong></span> llamado <code>{devtools}</code>, que nos permitirá la instalación desde Github</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb430"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb430-1"><a href="#cb430-1"></a><span class="fu">install.packages</span>(<span class="st">"devtools"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="instalar-desde-github-1" class="slide level2">
<h2>Instalar desde Github</h2>
<p>Las <span class="hl-yellow"><strong>instrucciones de instalación</strong></span> suelen venir detalladas en la portada del repositorio</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/install_perreo.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rosalia.png" width="310"></p>
</div>
</div>
<div class="fragment">
<p>En la mayoría de casos bastará con la función <code>install_github()</code> (del paquete que acabamos de instalar), pasándole como argumento la <span class="hl-yellow"><strong>ruta del repositorio</strong></span> (sin “github.com/”).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"jbgb13/peRReo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ya puedes perrear con ggplot ;)</p>
</div>
</section>
<section id="descargar-desde-github" class="slide level2">
<h2>Descargar desde Github</h2>
<p>La mayoría de veces lo que subamos no será un paquete de R como tal sino que <span class="hl-yellow"><strong>subiremos un código más o menos organizado</strong></span> y comentado. En ese caso podremos <span class="hl-yellow"><strong>descargar el repo entero</strong></span> haciendo click <span class="hl-green"><strong>Code</strong></span> y luego Download ZIP.</p>
<p>Por ejemplo, vamos a descargarnos los scripts de dataviz que han subido desde el <a href="https://github.com/ceopinio/bop-grafics">Centre d’Estudis d’Opinió</a></p>

<img data-src="img/ceo_github.png" class="r-stretch"></section>
<section id="ideal" class="slide level2">
<h2>Ideal</h2>

<img data-src="img/abogados_simpson.jpeg" width="600" class="r-stretch"><p><span class="hl-purple"><strong>¿Lo ideal en caso de RTVE?</strong></span> Tener dos tipos de repositorios</p>
<ul>
<li><p>Una <span class="hl-yellow"><strong>colección de repositorios públicos (producción)</strong></span> donde hacer transparente el código y los datos (<span class="hl-purple"><strong>ya validados</strong></span>), coordinado por un nº reducido de personas.</p></li>
<li><p>Una <span class="hl-yellow"><strong>colección de repositorios privados (desarrollo)</strong></span> donde esté todo el equipo colaborando y donde se haga el <span class="hl-purple"><strong>trabajo del día</strong></span>, con trazabilidad interna.</p></li>
</ul>
</section>
<section id="nuestro-primer-repositorio" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<p>Vamos a <span class="hl-yellow"><strong>crear nuestro primero repositorio</strong></span> que servirá además como <span class="hl-yellow"><strong>carta de presentación</strong></span> de nuestro perfil en Github.</p>
<ol type="1">
<li><p><span class="hl-purple"><strong>Repositories</strong></span>: hacemos click en las pestaña de Repositories.</p></li>
<li><p><span class="hl-purple"><strong>New</strong></span>: hacemos click en el <span class="hl-green"><strong>botón verde New</strong></span> para crear un nuevo repositorio</p></li>
</ol>

<img data-src="img/new_repo.png" class="r-stretch"></section>
<section id="nuestro-primer-repositorio-1" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<ul>
<li><p><span class="hl-purple"><strong>Repository name</strong></span>: el <span class="hl-yellow"><strong>nombre del repositorio</strong></span>. En este caso vamos a crear un repositorio muy concreto: el nombre debe <span class="hl-yellow"><strong>coincidir exactamente con tu nombre de usuario</strong></span></p></li>
<li><p><span class="hl-purple"><strong>Description</strong></span>: descripción de tu repositorio. En este caso será un repo de presentación.</p></li>
</ul>

<img data-src="img/repo_init_1.png" class="r-stretch"></section>
<section id="nuestro-primer-repositorio-2" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<ul>
<li><p><span class="hl-purple"><strong>Public vs private</strong></span>: con cada repositorio tendremos la opción de hacer el repositorio</p>
<ul>
<li><span class="hl-purple"><strong>público</strong></span>: todos los usuarios podrán ver el código así cómo la trazabilidad de su desarrollo (qué se añade y cuándo). Es para mí la opción más recomendable cuando quieres darle <span class="hl-yellow"><strong>visibilidad y transparencia</strong></span> a tu trabajo</li>
<li><span class="hl-purple"><strong>privado</strong></span>: solo tendrán acceso al repositorio aquellos usuarios a los que se lo permitas. No se podrá visualizar ni instalar nada de él fuera de Github.</li>
</ul></li>
</ul>

<img data-src="img/repo_init_2.png" class="r-stretch"><p>En este caso concreto, dado que será un repositorio de presentación, lo <span class="hl-yellow"><strong>haremos público</strong></span>.</p>
</section>
<section id="nuestro-primer-repositorio-3" class="slide level2">
<h2>Nuestro primer repositorio</h2>
<ul>
<li><span class="hl-purple"><strong>Add a README file</strong></span>: un README file será el archivo donde incluiremos las <span class="hl-yellow"><strong>instrucciones y detalles de uso</strong></span> a los demás (en el caso de <code>{peRReo}</code> era el archivo que contenía los detalles de instalación)</li>
</ul>

<img data-src="img/repo_init_3.png" class="r-stretch"><p>De momento <span class="hl-red"><strong>ignoraremos los demás campos</strong></span> para este primer repositorio.</p>
</section>
<section id="nuestro-primer-repositorio-4" class="slide level2">
<h2>Nuestro primer repositorio</h2>

<img data-src="img/repo_init_1.png" class="r-stretch"><p>Por defecto Github asume que este repositorio, con el <span class="hl-yellow"><strong>mismo nombre que nuestro usuario</strong></span> será el repositorio que querremos que se presente de inicio cuando alguien entra en nuestro perfil, y será el repositorio donde [<strong>incluir en el README.md</strong>] una presentación de nosotros y un índice de tu trabajo (si quieres).</p>
</section>
<section id="nuestro-primer-repositorio-5" class="slide level2">
<h2>Nuestro primer repositorio</h2>

<img data-src="img/profile_github_md.png" class="r-stretch"><p>Fíjate que ahora en nuestra <span class="hl-yellow"><strong>portada tenemos dicho README.md</strong></span> que podemos personalizar a nuestro gusto haciendo uso de <span class="hl-yellow"><strong>html y markdown</strong></span>.</p>
<p>Aquí puedes ver <a href="https://github.com/matiassingers/awesome-readme"><strong>algunos ejemplos de README.MD</strong></a></p>
</section>
<section id="repo-de-código" class="slide level2">
<h2>Repo de código</h2>
<p>Una vez que tenemos nuestro README de presentación (recuerda que puedes <span class="hl-yellow"><strong>personalizar a tu gusto con html y markdown</strong></span>) vamos a crear un <span class="hl-yellow"><strong>repositorio de código</strong></span>.</p>
<div class="fragment">
<p>Si ya era importante <span class="hl-yellow"><strong>trabajar con proyectos</strong></span> en <code>RStudio</code>, cuando lo combinamos con Github es aún más crucial que creemos un proyecto antes de subir el código, así que vamos a crear uno de prueba que se llame <code>repo-github-1</code>.</p>
</div>
<div class="fragment">
<p>En dicho proyecto vamos a <span class="hl-yellow"><strong>crear un script</strong></span> (en mi caso llamado <strong>codigo.R</strong>) en el que deberás hacer los siguientes pasos:</p>
</div>
</section>
<section id="repo-de-código-1" class="slide level2">
<h2>Repo de código</h2>
<ol type="1">
<li><span class="hl-yellow"><strong>Carga</strong></span> directamente desde la página del <a href="https://cnecovid.isciii.es/covid19/resources">ISCIII</a> el archivo llamado <code>casos_hosp_uci_def_sexo_edad_provres.csv</code></li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb432"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb432-1"><a href="#cb432-1"></a><span class="co"># Carga de datos desde ISCIII</span></span>
<span id="cb432-2"><a href="#cb432-2"></a>datos_covid <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://cnecovid.isciii.es/covid19/resources/casos_hosp_uci_def_sexo_edad_provres.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><span class="hl-yellow"><strong>Filtra</strong></span> datos de Madrid (<code>"M"</code>), de 2020 y con sexo conocido (hombre/mujer). Tras ello quédate con las columnas <code>fecha</code>, <code>sexo</code>, <code>grupo_edad</code>, <code>num_casos</code> (ese orden). Por último obtén la suma de casos diarios por fecha y sexo.</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1"></a><span class="co"># Depuración</span></span>
<span id="cb433-2"><a href="#cb433-2"></a>datos_madrid <span class="ot">&lt;-</span></span>
<span id="cb433-3"><a href="#cb433-3"></a>  datos_covid <span class="sc">|&gt;</span></span>
<span id="cb433-4"><a href="#cb433-4"></a>  <span class="co"># Filtrado por Madrid y fecha</span></span>
<span id="cb433-5"><a href="#cb433-5"></a>  <span class="fu">filter</span>(provincia_iso <span class="sc">==</span> <span class="st">"M"</span> <span class="sc">&amp;</span> fecha <span class="sc">&lt;=</span> <span class="st">"2020-12-31"</span> <span class="sc">&amp;</span> sexo <span class="sc">!=</span> <span class="st">"NC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb433-6"><a href="#cb433-6"></a>  <span class="co"># Selección de columnas</span></span>
<span id="cb433-7"><a href="#cb433-7"></a>  <span class="fu">select</span>(provincia_iso<span class="sc">:</span>fecha, num_casos) <span class="sc">|&gt;</span> </span>
<span id="cb433-8"><a href="#cb433-8"></a>  <span class="co"># Resumen de casos diarios por fecha y sexo</span></span>
<span id="cb433-9"><a href="#cb433-9"></a>  <span class="fu">summarise</span>(<span class="at">num_casos =</span> <span class="fu">sum</span>(num_casos), <span class="at">.by =</span> <span class="fu">c</span>(fecha, sexo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</section>
<section id="repo-de-código-2" class="slide level2">
<h2>Repo de código</h2>
<ol start="3" type="1">
<li><span class="hl-yellow"><strong>Exporta el dataset a un csv</strong></span> en una carpeta que se llame <code>exportado</code></li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb434"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1"></a><span class="co"># Exportamos datos</span></span>
<span id="cb434-2"><a href="#cb434-2"></a><span class="fu">write_csv</span>(datos_madrid, <span class="at">file =</span> <span class="st">"./exportado/datos_madrid.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:40%;">
<ol start="4" type="1">
<li>Crea una <span class="hl-yellow"><strong>gráfica de líneas</strong></span> que tenga en el eje x fecha, en el eje y casos, con una curva por sexo (gráficas separadas).</li>
</ol>
<div class="cell">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1"></a><span class="co"># Gráfica</span></span>
<span id="cb435-2"><a href="#cb435-2"></a><span class="fu">ggplot</span>(datos_madrid) <span class="sc">+</span></span>
<span id="cb435-3"><a href="#cb435-3"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> num_casos, <span class="at">color =</span> sexo),</span>
<span id="cb435-4"><a href="#cb435-4"></a>            <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">linewidth =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb435-5"><a href="#cb435-5"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#85519D"</span>, <span class="st">"#278862"</span>)) <span class="sc">+</span></span>
<span id="cb435-6"><a href="#cb435-6"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>sexo) <span class="sc">+</span></span>
<span id="cb435-7"><a href="#cb435-7"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb435-8"><a href="#cb435-8"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div><div class="column" style="width:60%;">
<p><img data-src="./img/ggplot.png" width="380"></p>
</div>
</div>
</div>
<div class="fragment">
<ol start="5" type="1">
<li>Tras ello <span class="hl-yellow"><strong>exportamos la gráfica</strong></span></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"./exportado/ggplot.png"</span>, <span class="at">plot =</span> <span class="fu">last_plot</span>(),</span>
<span id="cb436-2"><a href="#cb436-2"></a>       <span class="at">bg =</span> <span class="st">"white"</span>, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">height =</span> <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="repo-de-código-3" class="slide level2">
<h2>Repo de código</h2>
<p>¿Cómo <span class="hl-yellow"><strong>subimos el proyecto</strong></span>? Vamos de nuevo a <span class="hl-yellow"><strong>crear un proyecto de cero</strong></span>. Antes no hemos hablado de dos campos importantes:</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/repo-1.png" width="460"></p>
</div><div class="column" style="width:50%;">
<ul>
<li><p><code>Add .gitignore</code> nos permitirá <span class="hl-yellow"><strong>seleccionar el lenguaje</strong></span> en el que estará nuestro proyecto para que Github lo entienda al sincronizar (y no actualice cosas que no deba).</p></li>
<li><p><code>Choose a license</code> nos permitirá <span class="hl-yellow"><strong>seleccionar la licencia</strong></span> que determinará las condiciones en las que otros podrán reusar tu código.</p></li>
</ul>
</div>
</div>
</section>
<section id="repo-de-código-4" class="slide level2">
<h2>Repo de código</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/repo-1-1.png"></p>
</div><div class="column" style="width:50%;">
<p>Si te fijas traer crearlo tenemos solo 3 archivos: el de licencia, el .gitignore y el readme.md (donde deberíamos escribir una guía de uso de lo que hayamos subido)</p>
</div>
</div>
<p>Para subir los archivos vamos a clickar en <span class="hl-purple"><strong>Add file &lt; Upload File</strong></span> y <span class="hl-yellow"><strong>arrastraremos TODOS los archivos</strong></span> de la carpeta de nuestro proyecto.</p>
</section>
<section id="repo-de-código-5" class="slide level2">
<h2>Repo de código</h2>
<p>Tras la subida de archivos tendremos un cuadro llamado <span class="hl-purple"><strong>Commit changes</strong></span></p>

<img data-src="./img/commit-1.png" class="r-stretch"><p>Un <span class="hl-purple"><strong>commit</strong></span> es una <span class="hl-yellow"><strong>modificación del repositorio</strong></span> con algo que se añade/elimine/modifique, y dicho cuadro es recomendable usarlo para <span class="hl-yellow"><strong>resumir en qué consiste la modificación</strong></span>, de manera que quede trazado el cambio.</p>
</section>
<section id="repo-de-código-6" class="slide level2">
<h2>Repo de código</h2>
<p>Haciendo click en el reloj donde indica el <span class="hl-yellow"><strong>número de commits</strong></span> accedemos al <span class="hl-yellow"><strong>histórico de commits (cambios)</strong></span> con hora, día, autor, comentarios, etc.</p>

<img data-src="./img/commit-reloj.png" class="r-stretch"></section>
<section id="repo-de-código-7" class="slide level2">
<h2>Repo de código</h2>
<p>Vamos a realizar un <span class="hl-yellow"><strong>cambio en nuestro código</strong></span>: en tu código local (local –&gt; tu ordenador), en lugar de filtrar por Madrid haz el <span class="hl-yellow"><strong>filtro por Barcelona</strong></span>, guarda el código y sube en el repositorio el nuevo archivo (con el mismo nombre, Github hará la sobrescritura)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb437" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb437-1"><a href="#cb437-1"></a>datos_bcn <span class="ot">&lt;-</span></span>
<span id="cb437-2"><a href="#cb437-2"></a>  datos_covid <span class="sc">|&gt;</span></span>
<span id="cb437-3"><a href="#cb437-3"></a>  <span class="fu">filter</span>(provincia_iso <span class="sc">==</span> <span class="st">"B"</span> <span class="sc">&amp;</span> fecha <span class="sc">&lt;=</span> <span class="st">"2020-12-31"</span> <span class="sc">&amp;</span> sexo <span class="sc">!=</span> <span class="st">"NC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb437-4"><a href="#cb437-4"></a>  <span class="fu">select</span>(fecha, sexo, grupo_edad, num_casos) <span class="sc">|&gt;</span> </span>
<span id="cb437-5"><a href="#cb437-5"></a>  <span class="fu">summarise</span>(<span class="at">num_casos =</span> <span class="fu">sum</span>(num_casos), <span class="at">.by =</span> <span class="fu">c</span>(fecha, sexo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="consulta-de-commits" class="slide level2">
<h2>Consulta de commits</h2>
<p><img data-src="./img/barcelona_covid.png" width="550"></p>
<div class="columns">
<div class="column" style="width:40%;">
<p>Si ahora <span class="hl-yellow"><strong>consultamos el commit</strong></span>, al lado hay un número que lo identifica, y clickando en él nos resume los cambios: no solo <span class="hl-yellow"><strong>almacena todas las versiones pasadas</strong></span> sino que además nos <span class="hl-yellow"><strong>muestra las diferencias entre los archivos cambiados</strong></span></p>
</div><div class="column" style="width:60%;">
<p><img data-src="./img/commit_cambio.png"></p>
</div>
</div>
</section>
<section id="trazabilidad-de-cambios" class="slide level2">
<h2>Trazabilidad de cambios</h2>
<div class="columns">
<div class="column" style="width:72%;">
<p><img data-src="./img/commit_split.png"> <img data-src="./img/commit_unified.png"></p>
</div><div class="column" style="width:28%;">
<p>Tenemos <span class="hl-yellow"><strong>dos modos de visualización</strong></span> de los cambios: el modo split nos muestra el antiguo y el nuevo, con las inclusiones en verde y lo que ya no está en rojo; y el modo unified nos muestra todo en un mismo documento.</p>
</div>
</div>
</section>
<section id="recuperación-de-commits" class="slide level2">
<h2>Recuperación de commits</h2>

<img data-src="./img/browse-repo.png" class="r-stretch"><p>Github nos permite incluso <span class="hl-yellow"><strong>recuperar una versión del pasado</strong></span> de nuestro repositorio, haciendo click en el tercer icono del commit.</p>
</section>
<section id="recuperación-de-commits-1" class="slide level2">
<h2>Recuperación de commits</h2>

<img data-src="./img/branch-commit.png" class="r-stretch"><p>Si te fijas ahora al lado de <code>1 branch</code> tenemos un <span class="hl-yellow"><strong>menú desplegable</strong></span> en el que antes ponía <code>main</code> y ahora un número identificador del commit. Ya hablaremos de la idea de <span class="hl-yellow"><strong>rama (branch)</strong></span></p>
</section>
<section id="repo-con-rmdqmd" class="slide level2">
<h2>Repo con rmd/qmd</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>Vamos a poner en práctica lo aprendido:</p>
<ol type="1">
<li><p>Crea un nuevo repositorio en Github (llamado <code>repo-github-2</code>) donde habrá alojado con proyecto de R.</p></li>
<li><p>Crea un proyecto en <code>RStudio</code> que se llame (por ejemplo) <code>proyecto-qmd</code></p></li>
<li><p>Una vez dentro del proyecto en <code>RStudio</code> haz click en <code>File &lt; New File &lt; Quarto Document</code></p></li>
</ol>
</div><div class="column" style="width:40%;">
<p><img data-src="./img/primer-qmd.png"></p>
</div>
</div>
<p>Deberás tener un documento similar a este: un <span class="hl-yellow"><strong>quarto markdown (.qmd)</strong></span>, un documento que nos permitirá incluir <span class="hl-yellow"><strong>markdown + código</strong></span> (puede ser <code>R</code> o puede ser <code>Observable</code>, <code>D3</code>, etc).</p>
</section>
<section id="repo-con-rmdqmd-1" class="slide level2">
<h2>Repo con rmd/qmd</h2>
<p>Este formato es ideal para:</p>
<ul>
<li><span class="hl-yellow"><strong>Trabajar en equipo</strong></span> construyendo el borrador de una pieza.</li>
<li>Tomar <span class="hl-yellow"><strong>apuntes o informes</strong></span> para uno mismo.</li>
<li><span class="hl-yellow"><strong>Presentar</strong></span> tu trabajo a tus compañeros.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/prueba-qmd-html.png"></p>
</div><div class="column" style="width:50%;">
<p>Si te fijas ahora nuestro repositorio tiene un archivo con formato <code>.html</code>…es decir…</p>
<p><span class="hl-yellow"><strong>¡Es una web!</strong></span></p>
</div>
</div>
</section>
<section id="github-pages" class="slide level2">
<h2>Github pages</h2>
<p>¿Cómo <span class="hl-yellow"><strong>convertir nuestro repositorio en una web</strong></span>?</p>

<img data-src="./img/github-pages.png" class="r-stretch"><ol type="1">
<li>Haz click en <code>Settings</code></li>
<li>Ve al apartado <code>Pages</code></li>
<li>En el subapartado <code>branch</code> selecciona la única rama que tenemos ahora (<code>main</code>)</li>
<li>Selecciona la carpeta donde tengas el <code>.html</code> (en web complejas estará como en cualquier web en <code>docs</code>, en algo simple estará en la ruta raiz del repositorio)</li>
<li>Haz click en <code>Save</code></li>
</ol>
</section>
<section id="github-pages-1" class="slide level2">
<h2>Github pages</h2>
<p>Si te fijas en la <span class="hl-yellow"><strong>parte superior del repositorio</strong></span> ahora tenemos un icono naranja, que nos indica que la <span class="hl-orange"><strong>web está en proceso de ser desplegada (deploy)</strong></span></p>

<img data-src="./img/github-naranja.png" class="r-stretch"></section>
<section id="github-pages-2" class="slide level2">
<h2>Github pages</h2>
<p>Pasados unos segundos (dependiendo del tamaño de la web y tu conexión a internet) ese <span class="hl-green"><strong>icono pasará a ser un check verde</strong></span>: habemus web</p>

<img data-src="./img/github-verde.png" class="r-stretch"><p>El <span class="hl-yellow"><strong>link de la web por defecto</strong></span> será <code>{nombre_usuario}.github.io/{nombre_repo}</code></p>
</section>
<section id="github-pages-3" class="slide level2">
<h2>Github pages</h2>

<img data-src="./img/github-pages-deploy.png" class="r-stretch"><p>¡Un momento! Ahora mismo nuestra web <span class="hl-red"><strong>no nos está mostrando nuestro .qmd</strong></span>, sino por defecto el <span class="hl-yellow"><strong>README.md</strong></span>.</p>
<div class="fragment">
<p>Para que Github entienda que queremos visualizar ese <code>.html</code> que hemos generado a partir del <code>.qmd</code> vamos en nuestro proyecto local a <span class="hl-yellow"><strong>borrar</strong></span> todo lo que no sea nuestro archivo <code>.Rproj</code> y nuestro archivo <code>.qmd</code>, y vamos a <span class="hl-yellow"><strong>cambiar el nombre</strong></span> a este último llamándolo <code>index.qmd</code>, y volvemos a compilarlo para <span class="hl-yellow"><strong>generar un index.html</strong></span></p>
</div>
</section>
<section id="github-pages-4" class="slide level2">
<h2>Github pages</h2>
<p>Vamos a <span class="hl-yellow"><strong>subir a Github ese nuevo proyecto</strong></span> con el cambio de nombre (llamado <code>repo-github-3</code>) para ver luego las diferencias entre uno y otro</p>

<img data-src="./img/repo-index-html.png" class="r-stretch"></section>
<section id="github-pages-5" class="slide level2">
<h2>Github pages</h2>
<p>Si <span class="hl-yellow"><strong>repetimos el proceso para hacer una Page</strong></span> y esperamos al tick verde…</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="./img/index-html-qmd.png"></p>
</div><div class="column" style="width:50%;">
<p>Si a tu <code>.qmd</code> ya le llamas de inicio <code>index.qmd</code>, automáticamente, al detectar Github un <code>index.html</code>, interpreta que ese <span class="hl-yellow"><strong>archivo index.html</strong></span> es el que define la web (y puedes personalizar añadiendo un archivo <code>css</code> de estilos)</p>
<p><span class="hl-green"><strong>Habemus web</strong></span> simplemente clickando en Pages :)</p>
</div>
</div>
</section>
<section id="repo-con-diapositivas" class="slide level2">
<h2>Repo con diapositivas</h2>
<p>Vamos a crear el último repositorio que se llamará <code>repo-diapos</code>, y crear un proyecto en <code>RStudio</code> del mismo nombre (por ejemplo). Una vez creado le daremos a <code>File &lt; New File &lt; Quarto Presentation</code>.</p>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/quarto-slides.png"></p>
</div><div class="column" style="width:55%;">
<p>La forma de escribir será igual que un <code>.qmd</code> normal solo que ahora <span class="hl-yellow"><strong>cada diapositiva la separaremos</strong></span> con un <code>---</code> (usando archivos de estilos podemos personalizar lo que queramos)</p>
<p>Llama al archivo directamente <code>index.qmd</code>, súbelo a Github y con un click en Pages tienes una <span class="hl-yellow"><strong>web con tus diapositivas</strong></span></p>
</div>
</div>
</section>
<section id="uso-de-gitkraken" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>La forma más <span class="hl-yellow"><strong>sencilla para trabajar de manera colaborativa</strong></span> en Github, y tenerlo sincronizado con nuestro local, es hacer uso de <a href="https://www.gitkraken.com/download">Gitkraken</a></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/gitkraken-repo.png"></p>
</div><div class="column" style="width:50%;">
<p>Una vez dentro clickamos en el icono de la carpeta (<code>Repo Management</code>) y si ya tenemos el repositorio en Github seleccionamos <code>Clone</code>, indicando donde queremos clonar (en nuestro local) y que <span class="hl-yellow"><strong>repositorio de Github queremos clonar</strong></span>.</p>
</div>
</div>
</section>
<section id="uso-de-gitkraken-1" class="slide level2">
<h2>Uso de Gitkraken</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/view-change.png"></p>
</div><div class="column" style="width:50%;">
<p>Una vez clonado, la idea es que cada <span class="hl-yellow"><strong>cambio que hagamos en local nos aparecerá en Gitkraken</strong></span> como <code>View changes</code>.</p>
</div>
</div>
</section>
<section id="uso-de-gitkraken-2" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Cuando tengas suficientes cambios como para <span class="hl-yellow"><strong>actualizar el repositorio</strong></span> (tampoco tiene sentido actualizar con cada edición), verás algo similar a esto con todos los <span class="hl-yellow"><strong>commits realizados</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/stage-all-changes.png"></p>
</div><div class="column" style="width:50%;">
<p>Podrás decidir cuáles de los <span class="hl-yellow"><strong>commits locales quieres incluir en remoto</strong></span>, bien uno a uno o en <code>Stage all changes</code> (para todos)</p>
</div>
</div>
</section>
<section id="uso-de-gitkraken-3" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Tras incluir los commits deberás incluir un <span class="hl-yellow"><strong>título y descripción del commit</strong></span></p>

<img data-src="img/titulo-commit.png" class="r-stretch"></section>
<section id="uso-de-gitkraken-4" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Tras hacerlo verás que ahora tenemos <span class="hl-yellow"><strong>dos iconos separados en una especie de árbol</strong></span> (¿te acuerdas de la <code>branch</code> o rama?):</p>
<ul>
<li><p><span class="hl-purple"><strong>Ordenador</strong></span>: la versión del repositorio que tienes en tu <span class="hl-yellow"><strong>ordenador</strong></span>.</p></li>
<li><p><span class="hl-purple"><strong>Logo</strong></span>: la versión del repositorio que tienes <span class="hl-yellow"><strong>subida en remoto</strong></span></p></li>
</ul>

<img data-src="img/split-gitkraken.png" class="r-stretch"></section>
<section id="uso-de-gitkraken-5" class="slide level2">
<h2>Uso de Gitkraken</h2>
<p>Mientras eso suceda solo tendrás sincronizado tu ordenador con Gitkraken, pero no con Github. Para ello haremos <span class="hl-yellow"><strong>click en Push</strong></span> (con <code>Pull</code> podrás forzar a tener en local lo mismo que en remoto).</p>

<img data-src="img/push-gitkraken.png" class="r-stretch"></section>
<section id="branchs" class="slide level2">
<h2>Branchs</h2>
<p>Como hemos mencionado ya en varias ocasiones, hay un elefante en la habitación que aún no hemos mentado: las <span class="hl-yellow"><strong>ramas o branchs</strong></span> de un repositorio.</p>
<div class="fragment">
<p>Imagina que estáis trabajando varios en un proyecto y teneís una versión que funciona pero que queréis <span class="hl-yellow"><strong>modificar en paralelo a partir del estado actual</strong></span> del repositorio.</p>
</div>
<div class="fragment">
<p>Las <span class="hl-yellow"><strong>ramas</strong></span> nos permiten partir de una versión común del repositorio y hacer cambios que <span class="hl-yellow"><strong>no afecten a los demás</strong></span></p>
</div>
</section>
<section id="branchs-1" class="slide level2">
<h2>Branchs</h2>
<p>Para <span class="hl-yellow"><strong>crear una rama</strong></span> a partir del estado actual de repositorio haremos click en <code>Branch</code> y le pondremos un nombre</p>

<img data-src="img/branch-button.png" class="r-stretch"><p>Una vez creada verás <span class="hl-yellow"><strong>dos iconos</strong></span> y un <span class="hl-yellow"><strong>menú desplegable</strong></span> con las distintas ramas en las que quieres hacer el commit. Imagina que realizas un cambio pero <span class="hl-yellow"><strong>no quieres añadirlo a la rama principal</strong></span>: puedes hacer el <span class="hl-yellow"><strong>commit en tu rama propia en LOCAL</strong></span> (lo harás en la rama activa de tu menú de branchs).</p>
</section>
<section id="branchs-2" class="slide level2">
<h2>Branchs</h2>
<p>La primera vez te pedirá que escribas la <span class="hl-yellow"><strong>rama en REMOTO</strong></span> con la quieres sincronizar tu rama en local. <span class="hl-green"><strong>Consejo</strong></span>: ponle el mismo nombre en remoto que en local.</p>

<img data-src="img/name-branch.png" class="r-stretch"></section>
<section id="branchs-3" class="slide level2">
<h2>Branchs</h2>
<p>Fíjate que ahora tenemos el ordenador y el logo en el mismo sitio. Esto no significa que tengas ambas ramas en tu local, solo que <span class="hl-yellow"><strong>Gitkraken tiene ambas sincronizadas</strong></span>: clickando en cualquiera de ellas, tus archivos en tu ordenador cambiarán.</p>

<img data-src="img/both-branchs.png" class="r-stretch"></section>
<section id="pull-request" class="slide level2">
<h2>Pull request</h2>
<p>Lo más recomendable es que <span class="hl-yellow"><strong>solo se incorpore de una rama secundaria</strong></span> a la rama principal aquello que está <span class="hl-yellow"><strong>validado por un/a coordinador/a</strong></span> del repositorio, asegurándose que todo funciona correctamente.</p>
<p>Cuando queramos incluirlo haremos <span class="hl-yellow"><strong>click con botón derecho</strong></span> en el icono de la rama secundaria y seleccionamos <code>Start a pull request to origin from...</code></p>

<img data-src="img/pull-request-menu.png" class="r-stretch"><div class="fragment">
<p>Una <span class="hl-yellow"><strong>pull request</strong></span> será una <span class="hl-yellow"><strong>petición al responsable de la rama principal</strong></span> para incluir los cambios</p>
</div>
</section>
<section id="pull-request-1" class="slide level2">
<h2>Pull request</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p><img data-src="img/create-pull-request.png"></p>
</div><div class="column" style="width:40%;">
<p>En el cuadro que no se abre deberemos escribir:</p>
<ul>
<li>La <span class="hl-yellow"><strong>rama</strong></span> a la que hacer el <code>merge</code> (normalmente la <code>main</code>)</li>
<li>Título y resumen de los cambios</li>
<li>Puedes incluso asignar un <span class="hl-yellow"><strong>revisor</strong></span> entre los colaboradores del repo.</li>
<li>Puedes asignar <span class="hl-yellow"><strong>etiquetas</strong></span></li>
</ul>
</div>
</div>
</section>
<section id="pull-request-2" class="slide level2">
<h2>Pull request</h2>
<p>Mientras no se acepte aparecerá un <span class="hl-yellow"><strong>icono de rama</strong></span> y un +1 en Pull Requests</p>
<p><img data-src="img/pending-branch.png" width="500"></p>
<div class="fragment">
<p>Si somos al mantenedor del repositorio, haciendo click en el menú nos saldrán las ramas que nos quieren hacer hacer <code>merge</code></p>
<p><img data-src="img/menu-pr.png" width="500"></p>
</div>
</section>
<section id="pull-request-3" class="slide level2">
<h2>Pull request</h2>
<p>Al hacer click se abrirá un <span class="hl-yellow"><strong>cuadro de Pull Request</strong></span> para decidir si</p>
<ul>
<li><span class="hl-yellow"><strong>Revisar</strong></span> los cambios</li>
<li><span class="hl-yellow"><strong>Aprobar</strong></span> el <code>merge</code></li>
<li><span class="hl-yellow"><strong>Añadir comentarios</strong></span> al que ha solicitado el <code>merge</code> por si queremos solicitar algún cambio <span class="hl-yellow"><strong>antes de ser aprobado</strong></span></li>
</ul>

<img data-src="img/menu-pr-2.png" class="r-stretch"></section>
<section id="pull-request-4" class="slide level2">
<h2>Pull request</h2>
<p>Tras revisar todo y aprobarlo clickaremos en <code>Confirm merge</code>, y tras ello podremos decidir si esa rama que era paralela a la principal la queremos <span class="hl-yellow"><strong>eliminar</strong></span> o dejar visible a todos (consejo: dejar visible para tene <span class="hl-yellow"><strong>trazabilidad</strong></span> del proyecto de trabajo)</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/merge-branch.png"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/delete-branch.png"></p>
</div>
</div>
</section></section>
<section>
<section id="frikadas" class="title-slide slide level1 center">
<h1>FRIKADAS</h1>
<p><span style="color:#444442;"><strong>Algunos paquetes o recursos curiosos</strong></span></p>
</section>
<section id="cosicas-curiosas" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="paletas-de-colores">Paletas de colores</h3>
<ul>
<li><p><span class="hl-purple"><strong>{ggthemes}</strong></span>: <span class="hl-yellow"><strong>temas y paletas extras</strong></span> para ggplot (por ejemplo para <strong>daltónicos</strong>) <a href="https://jrnold.github.io/ggthemes/" class="uri">https://jrnold.github.io/ggthemes/</a> y <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" class="uri">https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/</a></p></li>
<li><p><span class="hl-purple"><strong>{peRReo}</strong></span>: paletas inspiradas en <span class="hl-yellow"><strong>portadas de música urbana y latina</strong></span> <a href="https://github.com/jbgb13/peRReo" class="uri">https://github.com/jbgb13/peRReo</a></p></li>
<li><p><span class="hl-purple"><strong>Paletas inspiradas en el Metropolitan Museum</strong></span>: de Blake Robert Mills <a href="https://github.com/BlakeRMills/MetBrewer/tree/main" class="uri">https://github.com/BlakeRMills/MetBrewer/tree/main</a></p></li>
<li><p><span class="hl-purple"><strong>Paletas inspiradas Taylor Swift</strong></span>: <a href="https://github.com/asteves/tayloRswift" class="uri">https://github.com/asteves/tayloRswift</a></p></li>
<li><p><span class="hl-purple"><strong>Paletas inspiradas en Harry Potter</strong></span>: de Alejandro Jiménez <a href="https://github.com/aljrico/harrypotter" class="uri">https://github.com/aljrico/harrypotter</a></p></li>
<li><p><span class="hl-purple"><strong>{colorblindcheck}</strong></span>: detectar paletas de colores aptas <span class="hl-yellow"><strong>daltónicos/as</strong></span>. De Jakub Nowosad <a href="https://github.com/Nowosad/colorblindcheck" class="uri">https://github.com/Nowosad/colorblindcheck</a></p></li>
</ul>
</section>
<section id="cosicas-curiosas-1" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="dataviz">Dataviz</h3>
<ul>
<li><p><span class="hl-purple"><strong>R Graph Gallery</strong></span>: colección de dataviz en R <a href="https://www.r-graph-gallery.com/" class="uri">https://www.r-graph-gallery.com/</a></p></li>
<li><p><span class="hl-purple"><strong>{patchwork}</strong></span>: agregar y <span class="hl-yellow"><strong>componer gráficas</strong></span>. De Thomas Lin Pedersen. <a href="https://patchwork.data-imaginist.com" class="uri">https://patchwork.data-imaginist.com</a></p></li>
<li><p><span class="hl-purple"><strong>ggplotly</strong></span>: función de <code>{plotly}</code>, para convertir ggplot a plotly (<span class="hl-yellow"><strong>interactiva</strong></span>) <a href="https://www.rdocumentation.org/packages/plotly/versions/4.10.0/topics/ggplotly" class="uri">https://www.rdocumentation.org/packages/plotly/versions/4.10.0/topics/ggplotly</a>.</p></li>
</ul>
<p>Tras convertirlo a plotly se puede <span class="hl-yellow"><strong>guardar automáticamente en html</strong></span> con <a href="https://plotly-r.com/saving.html" class="uri">https://plotly-r.com/saving.html</a> y generar el <span class="hl-yellow"><strong>código del iframe responsive</strong></span> con <a href="https://bhaskarvk.github.io/widgetframe/articles/Using_widgetframe.html" class="uri">https://bhaskarvk.github.io/widgetframe/articles/Using_widgetframe.html</a></p>
</section>
<section id="cosicas-curiosas-2" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="dataviz-1">Dataviz</h3>
<ul>
<li><p><span class="hl-purple"><strong>{ggiraph}</strong></span>: gráficas interactivas al <span class="hl-yellow"><strong>estilo D3</strong></span>. <a href="https://davidgohel.github.io/ggiraph/" class="uri">https://davidgohel.github.io/ggiraph/</a></p></li>
<li><p><span class="hl-purple"><strong>Aprender a usar {ggiraph}</strong></span>: para gráficas interactivas al <span class="hl-yellow"><strong>estilo D3</strong></span> <a href="https://albert-rapp.de/posts/ggplot2-tips/17_ggiraph/17_ggiraph.html" class="uri">https://albert-rapp.de/posts/ggplot2-tips/17_ggiraph/17_ggiraph.html</a></p></li>
<li><p><span class="hl-purple"><strong>Gráficas interactivas</strong></span>: <a href="https://www.tanyashapiro.com/interactive-visuals" class="uri">https://www.tanyashapiro.com/interactive-visuals</a></p></li>
<li><p><span class="hl-purple"><strong>{geomtextpath}</strong></span>: paquete para <span class="hl-yellow"><strong>curvar el texto</strong></span> ajustándose a una gráfica. De Allan Cameron y Teun van den Brand. <a href="https://allancameron.github.io/geomtextpath/" class="uri">https://allancameron.github.io/geomtextpath/</a></p></li>
<li><p><span class="hl-purple"><strong>{ggstream}</strong></span>: visualización de <span class="hl-yellow"><strong>datos en flujo</strong></span>. De Z. Gu. <a href="https://github.com/davidsjoberg/ggstream" class="uri">https://github.com/davidsjoberg/ggstream</a></p></li>
<li><p><span class="hl-purple"><strong>{ggpattern}</strong></span>: rellenos con <span class="hl-yellow"><strong>patrones geométricos</strong></span> en ggplot2. De coolbutuseless y Trevor L. Davis. <a href="https://github.com/coolbutuseless/ggpattern" class="uri">https://github.com/coolbutuseless/ggpattern</a></p></li>
</ul>
</section>
<section id="cosicas-curiosas-3" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="mapas">Mapas</h3>
<ul>
<li><p><span class="hl-purple"><strong>{mapSpain}</strong></span>: visualización de <span class="hl-yellow"><strong>datos en mapas de España</strong></span> en R. De Diego Hernangómez <a href="https://dieghernan.github.io/rpubs/mapSpain_RMadrid/#1" class="uri">https://dieghernan.github.io/rpubs/mapSpain_RMadrid/#1</a></p></li>
<li><p><span class="hl-purple"><strong>{rasterpic}</strong></span>: visualización de <span class="hl-yellow"><strong>mapas con imágenes rasterizados de fondo</strong></span>. De Diego Hernangómez. <a href="https://dieghernan.github.io/rasterpic/" class="uri">https://dieghernan.github.io/rasterpic/</a></p></li>
</ul>
</section>
<section id="cosicas-curiosas-4" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="text-mining">Text mining</h3>
<ul>
<li><p><span class="hl-purple"><strong>Manual de text mining</strong></span>: de Julia Silge y David Robinson. Recurso: <a href="https://tidytextmining.com" class="uri">https://tidytextmining.com</a></p></li>
<li><p><span class="hl-purple"><strong>Descarga de textos libres</strong></span>: de David Robinson. Recurso: <a href="https://github.com/ropensci/gutenbergr" class="uri">https://github.com/ropensci/gutenbergr</a></p></li>
<li><p><span class="hl-purple"><strong>Análisis de sentimientos de tweets</strong></span>: de Harshvardhan. Recurso: <a href="https://www.harsh17.in/twitter-sentiments/" class="uri">https://www.harsh17.in/twitter-sentiments/</a></p></li>
</ul>
<h3 id="grafos-y-redes">Grafos y redes</h3>
<ul>
<li><span class="hl-purple"><strong>{tidygraph}</strong></span>: paquete al estilo <code>{tidyverse}</code> para <span class="hl-yellow"><strong>visualizar y manipular grafos</strong></span> <a href="https://tidygraph.data-imaginist.com/index.html" class="uri">https://tidygraph.data-imaginist.com/index.html</a></li>
</ul>
</section>
<section id="cosicas-curiosas-5" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="datos-curiosos">Datos curiosos</h3>
<ul>
<li><p><span class="hl-purple"><strong>{fitbitr}</strong></span>: API para acceder a <span class="hl-yellow"><strong>datos de pulseras fitbit</strong></span>. De Matt Kaye <a href="https://mrkaye97.github.io/fitbitr/index.html" class="uri">https://mrkaye97.github.io/fitbitr/index.html</a></p></li>
<li><p><span class="hl-purple"><strong>{rtweet}</strong></span>: API para acceder (al menos antes) a <span class="hl-yellow"><strong>Twitter</strong></span>. De Michael W. Kearney <a href="https://docs.ropensci.org/rtweet/" class="uri">https://docs.ropensci.org/rtweet/</a></p></li>
<li><p><span class="hl-purple"><strong>{owiDR}</strong></span>: API para acceder a datos de <span class="hl-yellow"><strong>Our World in Data</strong></span> <a href="https://github.com/piersyork/owidR" class="uri">https://github.com/piersyork/owidR</a></p></li>
<li><p><span class="hl-purple"><strong>{wordle}</strong></span>: API para acceder a <span class="hl-yellow"><strong>datos de WORDLE</strong></span>. De coolbutuseless <a href="https://coolbutuseless.github.io/2022/01/04/wordle-v0.1.5-a-package-for-playing-and-helping-solve-wordle-puzzles/" class="uri">https://coolbutuseless.github.io/2022/01/04/wordle-v0.1.5-a-package-for-playing-and-helping-solve-wordle-puzzles/</a></p></li>
<li><p><span class="hl-purple"><strong>Canciones de Taylor Swift</strong></span>: de W. Jake Thompson <a href="https://taylor.wjakethompson.com/" class="uri">https://taylor.wjakethompson.com/</a></p></li>
<li><p><span class="hl-purple"><strong>{chessR}</strong></span>: API para acceder a datos de <span class="hl-yellow"><strong>partidas de ajedrez</strong></span>. De Jason Zivkovic <a href="https://github.com/JaseZiv/chessR" class="uri">https://github.com/JaseZiv/chessR</a></p></li>
</ul>
</section>
<section id="cosicas-curiosas-6" class="slide level2">
<h2>Cosicas curiosas</h2>
<h3 id="informes-libros-diapositivas-y-webs">Informes, libros, diapositivas y webs</h3>
<ul>
<li><p><span class="hl-purple"><strong>Manual de Quarto</strong></span>: el nuevo rmarkdown, más completo y sencillo para elaborar manuales, diapositivas, informes e incluso webs <a href="https://quarto.org/docs/guide/" class="uri">https://quarto.org/docs/guide/</a></p></li>
<li><p><span class="hl-purple"><strong>Shiny</strong></span>: webs interactivas con R <a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/" class="uri">https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/</a></p></li>
</ul>
<h3 id="tablas">Tablas</h3>
<ul>
<li><p><span class="hl-purple"><strong>{gt}</strong></span>: tablas en R. De RStudio <a href="https://gt.rstudio.com/" class="uri">https://gt.rstudio.com/</a></p></li>
<li><p><span class="hl-purple"><strong>{gtExtras}</strong></span>: visualización de datos en tablas. De Thomas Mock. <a href="https://jthomasmock.github.io/gtExtras/index.html" class="uri">https://jthomasmock.github.io/gtExtras/index.html</a></p></li>
<li><p><span class="hl-purple"><strong>Tutorial de tablas</strong></span>: de Benjamin Nowak <a href="https://bjnnowak.netlify.app/2021/10/04/r-beautiful-tables-with-gt-and-gtextras/" class="uri">https://bjnnowak.netlify.app/2021/10/04/r-beautiful-tables-with-gt-and-gtextras/</a></p></li>
</ul>
</section></section>
<section id="gracias" class="title-slide slide level1 center">
<h1>¡GRACIAS!</h1>
<p><span style="color:#444442;"><strong>Mi mail javalv09@ucm.es, Twitter <a href="https://twitter.com/DadosdeLaplace"><span class="citation" data-cites="dadosdelaplace">@dadosdelaplace</span></a> e Instagram <a href="https://www.instagram.com/javieralvarezliebana/"><span class="citation" data-cites="javieralvarezliebana">@javieralvarezliebana</span></a> para lo que queráis (dudas, cervezas, …)</strong></span></p>
<div class="footer footer-default">
<p><a href="..."><strong>Diego Paúl Huaraca S.</strong></a> • Semestre 2023-A</p>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"width":"normal"},
'chalkboard': {"buttons":true},
'multiplex': {"secret":"16795694050945559108","id":"dc4deab00fad47b4","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>